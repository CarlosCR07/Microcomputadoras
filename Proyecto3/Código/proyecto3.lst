MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001                 PROCESSOR 16F877
                      00002                 INCLUDE <P16F877.INC>
                      00001         LIST
                      00002 ; P16F877.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00373         LIST
                      00003                 
  00000020            00004 valor   equ h'20'                       ;Registros auxiliares para rutina de retardo
  00000021            00005 valor1  equ h'21'
  00000022            00006 valor2  equ h'22'
  00000023            00007 contadorCentesima equ h'23'     ;Registros auxiliares para conversión Hexa - Decimal
  00000024            00008 contadorDecima equ h'24'
  00000025            00009 contadorUnidad equ h'25'
  00000027            00010 aux equ h'27'
  00000027            00011 regaux equ h'27'                        ;Registros auxiliares para visualizar en Hexadecimal
  00000028            00012 regaux2 equ h'28'
  00000029            00013 conver equ h'29'
  00000030            00014 resNivel equ h'30'
  00000053            00015 cte1 equ .83
0000                  00016                         ORG 0 ;Vector de reset
0000   2805           00017                         GOTO INICIO
0005                  00018                         ORG 5
                      00019 
0005   0185           00020 INICIO:         CLRF PORTA ; Limpia PORTA
0006   0186           00021                         CLRF PORTB ; Limpia PORTB
0007   0187           00022                         CLRF PORTC      ; Limpia PORTC
0008   0188           00023                         CLRF PORTD      ; Limpia PORTD
0009   0189           00024                         CLRF PORTE      ; Limpia PORTE
000A   1683           00025                         BSF STATUS,5 ; Cambia a banco 1
000B   1303           00026                         BCF STATUS,6
000C   3000           00027                         MOVLW 0x00
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000D   0086           00028                         MOVWF TRISB     ;TRISB<- 0x00 configuramos puerto B como salida
000E   3000           00029                         MOVLW H'0'              ; CONFIGURA PUERTO C COMO SALIDA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000F   0087           00030                         MOVWF TRISC             ; (TRISC) <-- 0h
0010   30FF           00031                         MOVLW 0xFF              ; CONFIGURA PUERTO D COMO ENTRADA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0011   0088           00032                         MOVWF TRISD             ; (TRISD) <-- FFh
0012   30FF           00033                         MOVLW 0xFF              ; CONFIGURA PUERTO E COMO ENTRADA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0013   0089           00034                         MOVWF TRISE             ; (TRISE) <-- FFh
                      00035                         ;MOVLW 0x01     
                      00036                         ;MOVWF TRISA     ;TRISA <- 0x01, configura puerto A como salida excepto el bit 0
                             
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0014   0185           00037                         CLRF TRISA              ;limpia TRISA, todos los pines son salidas
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0015   1405           00038                         BSF TRISA,0             ;el bit 0 de PORTA es entrada
0016   300E           00039                         MOVLW 0x0E              ;1110, hace al bit 0 del puerto A analógico y el resto d
                            igitales
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   009F           00040                         MOVWF ADCON1    ;ADCON1 <- 0x0E, configura puerto A y E como entradas digitales 
                            exceptuando el bit 0 del puerto A
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0018   1283           00041                         BCF STATUS,5    ;Regresamos al banco 0
0019   2279           00042                         CALL INICIA_LCD
001A   3080           00043                         MOVLW 0x80
001B   228A           00044                         CALL COMANDO
001C   3001           00045                         MOVLW B'00000001' ;ADFM=0,se configura el canal 0 (PORTA.0) como la entrada al c
                            onvertidor. Frecuencia de oscilador Fosc/2, se enciende el modulo convertidor
001D   009F           00046                         MOVWF ADCON0    ;ADCON0<-W
001E   22B0           00047                         CALL RETARDO    ;retardo de 50us
                      00048                         
001F   22B0           00049 LOOP_P:         CALL RETARDO
0020   151F           00050                         BSF ADCON0,GO   ;ADCON0.GO<- 1, iniciamos la conversion
0021   191F           00051 ESPERA:         BTFSC ADCON0,GO ;¿ADCON0.GO==0?
0022   2821           00052                         GOTO ESPERA             ;se retiene hasta que termine la conversion     
0023   081E           00053 CONTINUA:       MOVF ADRESH,W   ;W<-ADRESH
0024   00A9           00054                         MOVWF conver    ;(conver)<- W                   almacenamos el resultado de la c
                            onversion en conver
0025   0809           00055                         MOVF PORTE,W    ;W<-- (PORTE)
0026   3907           00056                         ANDLW 7                 ;W <-- W&00000111
0027   0782           00057                         ADDWF PCL,F             ;(PCL)<-- (PCL)+W
0028   2837           00058                         GOTO DECIMAL    ;PC+0   -> Switches: 000        Conversión entrada dipswitch de 
                            8 bits a decimal
0029   2865           00059                         GOTO HEXADECIMAL;PC+1   -> Switches: 001        Conversión entrada dipswitch de 
                            8 bits a hexadecimal
002A   28B7           00060                         GOTO BINARIO    ;PC+2   -> Switches: 010        Conversión entrada dipswitch de 
                            8 bits a binario
002B   28EC           00061                         GOTO VOLTAJE    ;PC+3   -> Switches: 011        
002C   29E2           00062                         GOTO CARGA              ;PC+4   -> Switches: 100
002D   2830           00063                         GOTO PRUEBA             ;PC+5 -> Switches: 101
002E   2A78           00064                         GOTO DEFAULT    ;PC+6 -> -> Switches: 110
002F   2A78           00065                         GOTO DEFAULT    ;PC+7 -> -> Switches: 111
                      00066 
0030   3050           00067 PRUEBA:         MOVLW a'P'
0031   2291           00068                         CALL DATOS
0032   3001           00069                         MOVLW 0x01                              ;NO, Limpia Display
0033   228A           00070                         CALL COMANDO
0034   3080           00071                         MOVLW 0x80                      ;regresa a inicio linea 1
0035   228A           00072                         CALL COMANDO
0036   281F           00073                         GOTO LOOP_P
0037   01A3           00074 DECIMAL:        CLRF contadorCentesima          ;Inicializa en 0
0038   01A4           00075                         CLRF contadorDecima                     ;Inicializa en 0
0039   01A5           00076                         CLRF contadorUnidad                     ;Inicializa en 0
003A   3044           00077                         MOVLW a'D'
003B   2291           00078                         CALL DATOS
003C   303A           00079                         MOVLW 0x3A              ;Dos puntos
003D   2291           00080                         CALL DATOS
003E   0829           00081                         MOVF conver,W   ;Leer el valor de los switches y lo almacena en aux
003F   00A7           00082                         MOVWF aux       
                      00083         
0040   3064           00084 LOOP_Centesimas:MOVLW 0x64                              ;Restar 100
Message[305]: Using default destination of 1 (file).
0041   02A7           00085                                 SUBWF aux
0042   1803           00086                                 BTFSC STATUS,C                  ;Verifica el estado de carry
0043   2861           00087                                 GOTO CentesimaEncontrada        ;SI hay carry, el resultado es un número
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                             positivo                               
0044   3064           00088                                 MOVLW 0x64
Message[305]: Using default destination of 1 (file).
0045   07A7           00089                                 ADDWF aux                                       ;NO hay carry, entonces 
                            recuperar residuo
0046   300A           00090 LOOP_Decimas:   MOVLW 0x0A
Message[305]: Using default destination of 1 (file).
0047   02A7           00091                                 SUBWF aux                               ;Restar 10
0048   1803           00092                                 BTFSC STATUS,C                  ;Verifica el estado de carry
0049   2863           00093                                 GOTO DecimaEncontrada           ;SI hay carry, el resultado es un número
                             positivo
004A   300A           00094                                 MOVLW 0x0A
Message[305]: Using default destination of 1 (file).
004B   07A7           00095                                 ADDWF aux                                       ;NO hay carry, entonces 
                            recuperar residuo = Unidades
004C   0827           00096                                 MOVF aux,w
004D   00A5           00097                                 MOVWF contadorUnidad    ;Guardar en contador
                      00098 
004E   0823           00099 MostrarDigitos: MOVF contadorCentesima,W        
004F   3E30           00100                                 ADDLW 0x30                                      ;Obtener valor ASCII
0050   2291           00101                                 CALL DATOS                                      ;Display Centesimas
0051   0824           00102                                 MOVF contadorDecima,W           
0052   3E30           00103                                 ADDLW 0x30                                      ;Obtener valor ASCII
0053   2291           00104                                 CALL DATOS                                      ;Display Decimas
0054   0825           00105                                 MOVF contadorUnidad,W           
0055   3E30           00106                                 ADDLW 0x30                                      ;Obtener valor ASCII
0056   2291           00107                                 CALL DATOS                                      ;Display Unidades
                      00108 
0057   0809           00109 HOLD_DECIMAL:   MOVF PORTE,W
0058   3C01           00110                                 SUBLW 0x01              ;W<--W-0x10
0059   1903           00111                                 BTFSC STATUS,Z          ;¿(CONTA)=0X10?
005A   2857           00112                                 GOTO HOLD_DECIMAL               ;SI                     
005B   3001           00113                                 MOVLW 0x01                              ;NO, Limpia Display
005C   228A           00114                                 CALL COMANDO
005D   3080           00115                                 MOVLW 0x80                      ;regresa a inicio linea 1
005E   228A           00116                                 CALL COMANDO
005F   0180           00117                                 CLRF W
0060   281F           00118                                 GOTO LOOP_P     
                      00119 
Message[305]: Using default destination of 1 (file).
0061   0AA3           00120 CentesimaEncontrada:INCF contadorCentesima
0062   2840           00121                                         GOTO LOOP_Centesimas
                      00122 
Message[305]: Using default destination of 1 (file).
0063   0AA4           00123 DecimaEncontrada:       INCF contadorDecima     
0064   2846           00124                                         GOTO LOOP_Decimas
                      00125 
0065   3048           00126 HEXADECIMAL:MOVLW a'H'
0066   2291           00127                         CALL DATOS
0067   303A           00128                         MOVLW 0x3A              ;Dos puntos
0068   2291           00129                         CALL DATOS
0069   0180           00130                         CLRF W
006A   0829           00131                         MOVF conver,W
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

006B   00A8           00132                         MOVWF regaux2
006C   0828           00133                         MOVF regaux2,W  ;restauramos el valor guardado por si acaso sufriese algun cambi
                            o
006D   39F0           00134                         ANDLW 0xF0              ;extraemos la parte alta
006E   00A7           00135                         MOVWF regaux    ;regaux <- W
006F   0CA7           00136                         RRF regaux,f
0070   0CA7           00137                         RRF regaux,f
0071   0CA7           00138                         RRF regaux,f
0072   0CA7           00139                         RRF regaux,f    ;convertida en parte baja
0073   2082           00140                         CALL CONVERHEXA
0074   0828           00141                         MOVF regaux2,W  ;restauramos el valor guardado por si acaso sufriese algun cambi
                            o
0075   390F           00142                         ANDLW 0x0F              ;extraemos la parte BAJA
0076   00A7           00143                         MOVWF regaux    ;regaux <- W
0077   2082           00144                         CALL CONVERHEXA
0078   0809           00145 HOLD_HEX:       MOVF PORTE,W            ;FUNCION PARA RETENER EL RESULTADO EN LCD
0079   3C01           00146                         SUBLW 0x01 ;  W<--W-0x30
007A   1903           00147                         BTFSC STATUS,Z  ;¿(CONTA)=0X20?
007B   2878           00148                         GOTO HOLD_HEX   ;SI                     
007C   3001           00149                         MOVLW 0x01              ;NO, Limpia Display
007D   228A           00150                         CALL COMANDO
007E   3080           00151                         MOVLW 0x80              ;regresa a inicio linea 1
007F   228A           00152                         CALL COMANDO
0080   0180           00153                         CLRF W
0081   281F           00154                         GOTO LOOP_P     
0082   0827           00155 CONVERHEXA:     MOVF regaux,W   ; W<- (regaux)
                      00156                         ;ANDLW 15                       ;W <-- W&00001111, el cuarto bit siempre está ac
                            tivo para las letras
0083   0782           00157                         ADDWF PCL,F             ;(PCL)<-- (PCL)+W
0084   2894           00158                         GOTO CASO0              ;PC+0   Caso 0000: Numero 0
0085   2896           00159                         GOTO CASO1              ;PC+1   Caso 0001: Numero 1
0086   2898           00160                         GOTO CASO2              ;PC+2   Caso 0010: Numero 2
0087   289A           00161                         GOTO CASO3              ;PC+3   Caso 0011: Numero 3
0088   289C           00162                         GOTO CASO4              ;PC+4   Caso 0100: Numero 4
0089   289E           00163                         GOTO CASO5              ;PC+5   Caso 0101: Numero 5
008A   28A0           00164                         GOTO CASO6              ;PC+6   Caso 0110: Numero 6
008B   28A2           00165                         GOTO CASO7              ;PC+7   Caso 0111: Numero 7
008C   28A4           00166                         GOTO CASO8              ;PC+8   Caso 1000: Numero 8
008D   28A6           00167                         GOTO CASO9              ;PC+9   Caso 1001: Numero 9
008E   28A8           00168                         GOTO CASOA              ;PC+10  Caso 1010: Letra A 
008F   28AA           00169                         GOTO CASOB              ;PC+11  Caso 1011: Letra B 
0090   28AC           00170                         GOTO CASOC              ;PC+12  Caso 1100: Letra C 
0091   28AE           00171                         GOTO CASOD              ;PC+13  Caso 1101: Letra D 
0092   28B0           00172                         GOTO CASOE              ;PC+14  Caso 1110: Letra E 
0093   28B2           00173                         GOTO CASOF              ;PC+15  Caso 1111: Letra F 
0094   3030           00174 CASO0:          MOVLW a'0'
0095   28B4           00175                         GOTO CONVEND
0096   3031           00176 CASO1:          MOVLW a'1'
0097   28B4           00177                         GOTO CONVEND
0098   3032           00178 CASO2:          MOVLW a'2'
0099   28B4           00179                         GOTO CONVEND
009A   3033           00180 CASO3:          MOVLW a'3'
009B   28B4           00181                         GOTO CONVEND
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

009C   3034           00182 CASO4:          MOVLW a'4'
009D   28B4           00183                         GOTO CONVEND
009E   3035           00184 CASO5:          MOVLW a'5'
009F   28B4           00185                         GOTO CONVEND
00A0   3036           00186 CASO6:          MOVLW a'6'
00A1   28B4           00187                         GOTO CONVEND
00A2   3037           00188 CASO7:          MOVLW a'7'
00A3   28B4           00189                         GOTO CONVEND
00A4   3038           00190 CASO8:          MOVLW a'8'
00A5   28B4           00191                         GOTO CONVEND
00A6   3039           00192 CASO9:          MOVLW a'9'
00A7   28B4           00193                         GOTO CONVEND
00A8   3041           00194 CASOA:          MOVLW a'A'
00A9   28B4           00195                         GOTO CONVEND
00AA   3042           00196 CASOB:          MOVLW a'B'
00AB   28B4           00197                         GOTO CONVEND
00AC   3043           00198 CASOC:          MOVLW a'C'
00AD   28B4           00199                         GOTO CONVEND
00AE   3044           00200 CASOD:          MOVLW a'D'
00AF   28B4           00201                         GOTO CONVEND
00B0   3045           00202 CASOE:          MOVLW a'E'
00B1   28B4           00203                         GOTO CONVEND
00B2   3046           00204 CASOF:          MOVLW a'F'
00B3   28B4           00205                         GOTO CONVEND
                      00206 
00B4   2291           00207 CONVEND:        CALL DATOS              ; Imprimimos el simbolo en el LCD
00B5   0180           00208                         CLRF W
00B6   0008           00209                         RETURN
                      00210 
00B7   0829           00211 BINARIO:        MOVF conver,W
00B8   3042           00212                         MOVLW a'B'
00B9   2291           00213                         CALL DATOS
00BA   303A           00214                         MOVLW 0x3A              ;Dos puntos
00BB   2291           00215                         CALL DATOS
                      00216                         ;CLRF conver            ;PRUEBA DE FUNCIÓN
00BC   1BA9           00217                         BTFSC conver,7
00BD   20E6           00218                         CALL ES_UNO
00BE   1FA9           00219                         BTFSS conver,7
00BF   20E9           00220                         CALL ES_CERO
00C0   1B29           00221                         BTFSC conver,6
00C1   20E6           00222                         CALL ES_UNO
00C2   1F29           00223                         BTFSS conver,6
00C3   20E9           00224                         CALL ES_CERO
00C4   1AA9           00225                         BTFSC conver,5
00C5   20E6           00226                         CALL ES_UNO
00C6   1EA9           00227                         BTFSS conver,5
00C7   20E9           00228                         CALL ES_CERO
00C8   1A29           00229                         BTFSC conver,4
00C9   20E6           00230                         CALL ES_UNO
00CA   1E29           00231                         BTFSS conver,4
00CB   20E9           00232                         CALL ES_CERO
00CC   19A9           00233                         BTFSC conver,3
00CD   20E6           00234                         CALL ES_UNO
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CE   1DA9           00235                         BTFSS conver,3
00CF   20E9           00236                         CALL ES_CERO
00D0   1929           00237                         BTFSC conver,2
00D1   20E6           00238                         CALL ES_UNO
00D2   1D29           00239                         BTFSS conver,2
00D3   20E9           00240                         CALL ES_CERO
00D4   18A9           00241                         BTFSC conver,1
00D5   20E6           00242                         CALL ES_UNO
00D6   1CA9           00243                         BTFSS conver,1
00D7   20E9           00244                         CALL ES_CERO
00D8   1829           00245                         BTFSC conver,0
00D9   20E6           00246                         CALL ES_UNO
00DA   1C29           00247                         BTFSS conver,0
00DB   20E9           00248                         CALL ES_CERO
00DC   0809           00249 HOLD_BIN:       MOVF PORTE,W
00DD   3C02           00250                         SUBLW 0x02 ;  W<--W-0x30
00DE   1903           00251                         BTFSC STATUS,Z  ;¿(CONTA)=0X30?
00DF   28DC           00252                         GOTO HOLD_BIN ;SI                       
00E0   3001           00253                         MOVLW 0x01              ;Limpia Display
00E1   228A           00254                         CALL COMANDO
00E2   3080           00255                         MOVLW 0x80              ;regresa a inicio linea 1
00E3   228A           00256                         CALL COMANDO
00E4   0180           00257                         CLRF W
00E5   281F           00258                         GOTO LOOP_P             
00E6   3031           00259 ES_UNO:         MOVLW a'1'
00E7   2291           00260                         CALL DATOS
00E8   0008           00261                         RETURN
00E9   3030           00262 ES_CERO         MOVLW a'0'
00EA   2291           00263                         CALL DATOS
00EB   0008           00264                         RETURN
                      00265 
00EC   2105           00266 VOLTAJE:        CALL UNIVOLT    ;Caso para mostrar Voltaje leído en decimal. Resolucion de 1
00ED   302E           00267                         MOVLW a'.'
00EE   2291           00268                         CALL DATOS
00EF   2137           00269                         CALL DECVOLT
00F0   218F           00270                         CALL CENVOLT
00F1   3020           00271                         MOVLW a' '
00F2   2291           00272                         CALL DATOS
00F3   3056           00273                         MOVLW a'V'
00F4   2291           00274                         CALL DATOS
00F5   306F           00275                         MOVLW a'o'
00F6   2291           00276                         CALL DATOS
00F7   306C           00277                         MOVLW a'l'
00F8   2291           00278                         CALL DATOS
00F9   3073           00279                         MOVLW a's'
00FA   2291           00280                         CALL DATOS
00FB   0809           00281 HOLD_VOL:       MOVF PORTE,W
00FC   3C03           00282                         SUBLW 0x03 ;  W<--W-0x30
00FD   1903           00283                         BTFSC STATUS,Z  ;¿(CONTA)=0X30?
00FE   28FB           00284                         GOTO HOLD_VOL ;SI                       
00FF   3001           00285                         MOVLW 0x01              ;Limpia Display
0100   228A           00286                         CALL COMANDO
0101   3080           00287                         MOVLW 0x80              ;regresa a inicio linea 1
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0102   228A           00288                         CALL COMANDO
0103   0180           00289                         CLRF W
0104   281F           00290                         GOTO LOOP_P                             
0105   0829           00291 UNIVOLT:        MOVF conver,W   ; Caso para obtener el nivel entero de volt leido (1-5)
0106   3C33           00292                         SUBLW 0x33              ; 0x33-W                        51 niveles      (el caso
                             0 tiene realmente 52 casos con el nivel 0, pero no lo contamos
0107   1C03           00293                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x33<W
0108   290E           00294                         GOTO CASO1A             ;NO, ES MAYOR EL NUMERO
0109   290A           00295                         GOTO CASO0B             ;SI, ES MENOR EL NUMERO
010A   21B0           00296 CASO0B:         CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
010B   3000           00297                         MOVLW 0x00
010C   00A8           00298                         MOVWF regaux2   
010D   2936           00299                         GOTO RETOMAV
010E   0829           00300 CASO1A:         MOVF conver,W
010F   3C66           00301                         SUBLW 0x66              ;0110 0110  NIVEL 102
0110   1C03           00302                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
0111   2917           00303                         GOTO CASO2A                     ;NO, ES MAYOR EL NUMERO
0112   2913           00304                         GOTO CASO1B                     ;SI, ES MENOR EL NUMERO
                      00305                         
0113   21B5           00306 CASO1B:         CALL V1 ;1.00-1.99V: 1  la condicion de pertenencia (al haberse evaluado la clase 0) es 
                            ser menor de 2
0114   3033           00307                         MOVLW 0x33
0115   00A8           00308                         MOVWF regaux2
0116   2936           00309                         GOTO RETOMAV
                      00310 
0117   0829           00311 CASO2A:         MOVF conver,W
0118   3C99           00312                         SUBLW 0x99              ;1001 1001  NIVEL 153
0119   1C03           00313                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x99<W
011A   2920           00314                         GOTO CASO3A                     ;NO, ES MAYOR EL NUMERO
011B   291C           00315                         GOTO CASO2B                     ;SI, ES MENOR EL NUMERO
011C   21BA           00316 CASO2B:         CALL V2                 ;2.00-2.99V: 2  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
011D   3066           00317                         MOVLW 0x66
011E   00A8           00318                         MOVWF regaux2
011F   2936           00319                         GOTO RETOMAV
0120   0829           00320 CASO3A:         MOVF conver,W
0121   3CCC           00321                         SUBLW 0xCC              ;1001 1001  NIVEL 204
0122   1C03           00322                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xcc<W
0123   2929           00323                         GOTO CASO4A                     ;NO, ES MAYOR EL NUMERO
0124   2925           00324                         GOTO CASO3B                     ;SI, ES MENOR EL NUMERO
0125   21BF           00325 CASO3B:         CALL V3                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0126   3099           00326                         MOVLW 0x99
0127   00A8           00327                         MOVWF regaux2
0128   2936           00328                         GOTO RETOMAV
0129   0829           00329 CASO4A:         MOVF conver,W
012A   3CFF           00330                         SUBLW 0xFF              ;1111 1010  NIVEL 255
012B   1C03           00331                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
012C   2932           00332                         GOTO CASO5A             ;NO, ES MAYOR EL NUMERO
012D   292E           00333                         GOTO CASO4B             ;SI, ES MENOR EL NUMERO
012E   21C4           00334 CASO4B:         CALL V4                 ;4.00-4.99V: 4  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012F   30CC           00335                         MOVLW 0xCC
0130   00A8           00336                         MOVWF regaux2
0131   2936           00337                         GOTO RETOMAV
0132   21C9           00338 CASO5A:         CALL V5                 ;5V: 5  la condicion de pertenencia (al haberse evaluado la clas
                            e 0) es ser menor de 2
0133   30FF           00339                         MOVLW 0xFF
0134   00A8           00340                         MOVWF regaux2
0135   2936           00341                         GOTO RETOMAV
0136   0008           00342 RETOMAV:        RETURN
                      00343 ;EVALUAMOS EL CASO DE LAS DECIMAS, SE RESTA LA UNIDAD
0137   0828           00344 DECVOLT:        MOVF regaux2,W  ;CASO DE DECIMAS.  
0138   0229           00345                         SUBWF conver,W  ; Restamos a la conversión el nivel base (la unidad del voltaje.
                             Asi, por ejemplo: 1.99 -> 0.99,  4.32 -> 0.32
                      00346                         ;MOVF conver,W  ; Caso para obtener el nivel entero de volt leido (1-5)
0139   00A7           00347                         MOVWF regaux    ; Guardamos el valor para restaurarlo en cada caso
013A   3C06           00348                         SUBLW 0x06              ; 0x06-W                        5 niveles       (0.0 - 0
                            .09)
013B   1C03           00349                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
013C   2942           00350                         GOTO CASO1AD            ;NO, ES MAYOR EL NUMERO
013D   293E           00351                         GOTO CASO0BD            ;SI, ES MENOR EL NUMERO
013E   21B0           00352 CASO0BD:        CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
013F   3000           00353                         MOVLW 0x00
0140   00A8           00354                         MOVWF regaux2
0141   298E           00355                         GOTO RETOMADV
0142   0827           00356 CASO1AD:        MOVF regaux,W
0143   3C0B           00357                         SUBLW 0x0B              ;0x0B-W   10 niveles (0.1-0.19)
0144   1C03           00358                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
0145   294B           00359                         GOTO CASO2AD                    ;NO, ES MAYOR EL NUMERO
0146   2947           00360                         GOTO CASO1BD                    ;SI, ES MENOR EL NUMERO
                      00361                         
0147   21B5           00362 CASO1BD:        CALL V1 ;1.00-1.99V: 1  la condicion de pertenencia (al haberse evaluado la clase 0) es 
                            ser menor de 2
0148   3006           00363                         MOVLW 0x06
0149   00A8           00364                         MOVWF regaux2
014A   298E           00365                         GOTO RETOMADV
                      00366 
014B   0827           00367 CASO2AD:        MOVF regaux,W
014C   3C10           00368                         SUBLW 0x10              ;0x10-W  15 niveles (0.2-0.29)
014D   1C03           00369                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x99<W
014E   2954           00370                         GOTO CASO3AD            ;NO, ES MAYOR EL NUMERO
014F   2950           00371                         GOTO CASO2BD            ;SI, ES MENOR EL NUMERO
0150   21BA           00372 CASO2BD:        CALL V2                 ;2.00-2.99V: 2  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0151   300B           00373                         MOVLW 0x0B
0152   00A8           00374                         MOVWF regaux2
0153   298E           00375                         GOTO RETOMADV
0154   0827           00376 CASO3AD:        MOVF regaux,W
0155   3C15           00377                         SUBLW 0x15              ;0x15-W  20 niveles (0.3-0.39)
0156   1C03           00378                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xcc<W
0157   295D           00379                         GOTO CASO4AD                    ;NO, ES MAYOR EL NUMERO
0158   2959           00380                         GOTO CASO3BD                    ;SI, ES MENOR EL NUMERO
0159   21BF           00381 CASO3BD:        CALL V3                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                             la clase 0) es ser menor de 2
015A   3010           00382                         MOVLW 0x10
015B   00A8           00383                         MOVWF regaux2
015C   298E           00384                         GOTO RETOMADV
015D   0827           00385 CASO4AD:        MOVF regaux,W
015E   3C1A           00386                         SUBLW 0x1A              ;0x1A-W  25 niveles (0.4-0.49)
015F   1C03           00387                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0160   2966           00388                         GOTO CASO5AD            ;NO, ES MAYOR EL NUMERO
0161   2962           00389                         GOTO CASO4BD            ;SI, ES MENOR EL NUMERO
0162   21C4           00390 CASO4BD:        CALL V4                 ;4.00-4.99V: 4  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0163   3015           00391                         MOVLW 0x15
0164   00A8           00392                         MOVWF regaux2
0165   298E           00393                         GOTO RETOMADV
0166   0827           00394 CASO5AD:        MOVF regaux,W
0167   3C1F           00395                         SUBLW 0x1F              ;0x1F-W  30 niveles (0.5-0.59)
0168   1C03           00396                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0169   296F           00397                         GOTO CASO6AD            ;NO, ES MAYOR EL NUMERO
016A   296B           00398                         GOTO CASO5BD            ;SI, ES MENOR EL NUMERO
016B   21C9           00399 CASO5BD:        CALL V5                 
016C   301A           00400                         MOVLW 0x1A
016D   00A8           00401                         MOVWF regaux2
016E   298E           00402                         GOTO RETOMADV
016F   0827           00403 CASO6AD:        MOVF regaux,W
0170   3C24           00404                         SUBLW 0x24              ;0x24-W  35 niveles (0.6-0.69)
0171   1C03           00405                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0172   2978           00406                         GOTO CASO7AD            ;NO, ES MAYOR EL NUMERO
0173   2974           00407                         GOTO CASO6BD            ;SI, ES MENOR EL NUMERO
0174   21CE           00408 CASO6BD:        CALL V6                 
0175   301F           00409                         MOVLW 0x1F
0176   00A8           00410                         MOVWF regaux2
0177   298E           00411                         GOTO RETOMADV
0178   0827           00412 CASO7AD:        MOVF regaux,W
0179   3C29           00413                         SUBLW 0x29              ;0x29-W  40 niveles (0.7-0.79)
017A   1C03           00414                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
017B   2981           00415                         GOTO CASO8AD            ;NO, ES MAYOR EL NUMERO
017C   297D           00416                         GOTO CASO7BD            ;SI, ES MENOR EL NUMERO
017D   21D3           00417 CASO7BD:        CALL V7                 
017E   3024           00418                         MOVLW 0x24
017F   00A8           00419                         MOVWF regaux2
0180   298E           00420                         GOTO RETOMADV
0181   0827           00421 CASO8AD:        MOVF regaux,W
0182   3C2E           00422                         SUBLW 0x2E              ;0x1A-W  45 niveles (0.8-0.89)
0183   1C03           00423                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0184   298A           00424                         GOTO CASO9AD            ;NO, ES MAYOR EL NUMERO
0185   2986           00425                         GOTO CASO8BD            ;SI, ES MENOR EL NUMERO
0186   21D8           00426 CASO8BD:        CALL V8                 
0187   3029           00427                         MOVLW 0x29
0188   00A8           00428                         MOVWF regaux2
0189   298E           00429                         GOTO RETOMADV
018A   21DD           00430 CASO9AD:        CALL V9
018B   302E           00431                         MOVLW 0x2E
018C   00A8           00432                         MOVWF regaux2           
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

018D   298E           00433                         GOTO RETOMADV
018E   0008           00434 RETOMADV:       RETURN
                      00435 ;EVALUAMOS LAS CENTESIMAS, SE RESTA LAS DECENAS
018F   0828           00436 CENVOLT:        MOVF regaux2,W  ;CASO DE CENTESIMAS.  
0190   0227           00437                         SUBWF regaux,W  ; Restamos a la conversión el nivel base (la unidad del voltaje.
                             Asi, por ejemplo: 1.99 -> 0.99,  4.32 -> 0.32
                      00438                         ;MOVF conver,W  ; Caso para obtener el nivel entero de volt leido (1-5)
0191   00A7           00439                         MOVWF regaux    ; Guardamos el valor para restaurarlo en cada caso
0192   3C01           00440                         SUBLW 0x01              ; 0x01-W                        1 niveles       (0.0)
0193   1C03           00441                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x01<W
0194   2998           00442                         GOTO CASO1AC            ;NO, ES MAYOR EL NUMERO
0195   2996           00443                         GOTO CASO0BC            ;SI, ES MENOR EL NUMERO
0196   21B0           00444 CASO0BC:        CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0197   29AF           00445                         GOTO RETOMACV
0198   0827           00446 CASO1AC:        MOVF regaux,W
0199   3C02           00447                         SUBLW 0x02              ;0x02-W   1 niveles (0.02)
019A   1C03           00448                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
019B   299F           00449                         GOTO CASO2AC                    ;NO, ES MAYOR EL NUMERO
019C   299D           00450                         GOTO CASO1BC                    ;SI, ES MENOR EL NUMERO
                      00451                         
019D   21BA           00452 CASO1BC:        CALL V2                 ;Se imprime 2, la resolución minima para las centésimas es de 0.
                            02
019E   29AF           00453                         GOTO RETOMACV
                      00454 
019F   0827           00455 CASO2AC:        MOVF regaux,W
01A0   3C03           00456                         SUBLW 0x03              ;0x03-W  1 niveles (0.04)
01A1   1C03           00457                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x03<W
01A2   29A6           00458                         GOTO CASO3AC            ;NO, ES MAYOR EL NUMERO
01A3   29A4           00459                         GOTO CASO2BC            ;SI, ES MENOR EL NUMERO
01A4   21C4           00460 CASO2BC:        CALL V4         
01A5   29AF           00461                         GOTO RETOMACV
01A6   0827           00462 CASO3AC:        MOVF regaux,W
01A7   3C04           00463                         SUBLW 0x04              ;0x04-W  1 niveles (0.06)
01A8   1C03           00464                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x04<W
01A9   29AD           00465                         GOTO CASO4AC    ;NO, ES MAYOR EL NUMERO
01AA   29AB           00466                         GOTO CASO3BC    ;SI, ES MENOR EL NUMERO
01AB   21CE           00467 CASO3BC:        CALL V6                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
01AC   29AF           00468                         GOTO RETOMACV
01AD   21D8           00469 CASO4AC:        CALL V8
01AE   29AF           00470                         GOTO RETOMACV
01AF   0008           00471 RETOMACV:       RETURN
                      00472 
                      00473 
01B0   3030           00474 V0:                     MOVLW a'0'              ;Imprime el valor 0 en el LCD
01B1   2291           00475                         CALL DATOS
01B2   3000           00476                         MOVLW h'0'
01B3   00B0           00477                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01B4   0008           00478                         RETURN
01B5   3031           00479 V1:                     MOVLW a'1'              ;Imprime el valor 1 en el LCD
01B6   2291           00480                         CALL DATOS
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01B7   3001           00481                         MOVLW h'1'
01B8   00B0           00482                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01B9   0008           00483                         RETURN
01BA   3032           00484 V2:                     MOVLW a'2'              ;Imprime el valor 2 en el LCD
01BB   2291           00485                         CALL DATOS
01BC   3002           00486                         MOVLW h'2'
01BD   00B0           00487                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01BE   0008           00488                         RETURN
01BF   3033           00489 V3:                     MOVLW a'3'              ;Imprime el valor 3 en el LCD
01C0   2291           00490                         CALL DATOS
01C1   3003           00491                         MOVLW h'3'
01C2   00B0           00492                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01C3   0008           00493                         RETURN
01C4   3034           00494 V4:                     MOVLW a'4'              ;Imprime el valor 4 en el LCD
01C5   2291           00495                         CALL DATOS
01C6   3004           00496                         MOVLW h'4'
01C7   00B0           00497                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01C8   0008           00498                         RETURN
01C9   3035           00499 V5:                     MOVLW a'5'              ;Imprime el valor 5 en el LCD
01CA   2291           00500                         CALL DATOS
01CB   3005           00501                         MOVLW h'5'
01CC   00B0           00502                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01CD   0008           00503                         RETURN
01CE   3036           00504 V6:                     MOVLW a'6'              ;Imprime el valor 6 en el LCD
01CF   2291           00505                         CALL DATOS
01D0   3006           00506                         MOVLW h'6'
01D1   00B0           00507                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01D2   0008           00508                         RETURN
01D3   3037           00509 V7:                     MOVLW a'7'              ;Imprime el valor 7 en el LCD
01D4   2291           00510                         CALL DATOS
01D5   3007           00511                         MOVLW h'7'
01D6   00B0           00512                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01D7   0008           00513                         RETURN
01D8   3038           00514 V8:                     MOVLW a'8'              ;Imprime el valor 8 en el LCD
01D9   2291           00515                         CALL DATOS
01DA   3008           00516                         MOVLW h'8'
01DB   00B0           00517                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01DC   0008           00518                         RETURN
01DD   3039           00519 V9:                     MOVLW a'9'              ;Imprime el valor 9 en el LCD
01DE   2291           00520                         CALL DATOS
01DF   3009           00521                         MOVLW h'9'
01E0   00B0           00522                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01E1   0008           00523                         RETURN
                      00524 
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01E2   2105           00525 CARGA:  CALL UNIVOLT
01E3   3001           00526                 MOVLW 0x01              ;Limpia Display
01E4   228A           00527                 CALL COMANDO
                      00528                 
                      00529 
01E5   3040           00530                 MOVLW 0X40 ;ALMACENAR CARACTERES EN CGRAM
01E6   228A           00531                 CALL COMANDO
01E7   22A3           00532                 CALL RET100MS
                      00533                 
                      00534                 ;CUADRO 0 - ALMACENANDO - Vacio
01E8   3000           00535                 MOVLW b'00000'
01E9   2291           00536                 CALL DATOS
01EA   300E           00537                 MOVLW b'01110'
01EB   2291           00538                 CALL DATOS
01EC   300A           00539                 MOVLW b'01010'
01ED   2291           00540                 CALL DATOS
01EE   300A           00541                 MOVLW b'01010'
01EF   2291           00542                 CALL DATOS
01F0   300A           00543                 MOVLW b'01010'
01F1   2291           00544                 CALL DATOS
01F2   3011           00545                 MOVLW b'10001'
01F3   2291           00546                 CALL DATOS
01F4   3011           00547                 MOVLW b'10001'
01F5   2291           00548                 CALL DATOS
01F6   301F           00549                 MOVLW b'11111'
01F7   2291           00550                 CALL DATOS
                      00551 
                      00552                 ;CUADRO 1 - ALMACENANDO - Nivel 1
01F8   3000           00553                 MOVLW b'00000'
01F9   2291           00554                 CALL DATOS
01FA   300E           00555                 MOVLW b'01110'
01FB   2291           00556                 CALL DATOS
01FC   300A           00557                 MOVLW b'01010'
01FD   2291           00558                 CALL DATOS
01FE   300A           00559                 MOVLW b'01010'
01FF   2291           00560                 CALL DATOS
0200   300A           00561                 MOVLW b'01010'
0201   2291           00562                 CALL DATOS
0202   3011           00563                 MOVLW b'10001'
0203   2291           00564                 CALL DATOS
0204   301F           00565                 MOVLW b'11111'
0205   2291           00566                 CALL DATOS
0206   301F           00567                 MOVLW b'11111'
0207   2291           00568                 CALL DATOS              
                      00569 
                      00570                 ;CUADRO 2 - ALMACENANDO - Nivel 2
0208   3000           00571                 MOVLW b'00000'
0209   2291           00572                 CALL DATOS
020A   300E           00573                 MOVLW b'01110'
020B   2291           00574                 CALL DATOS
020C   300A           00575                 MOVLW b'01010'
020D   2291           00576                 CALL DATOS
020E   300A           00577                 MOVLW b'01010'
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

020F   2291           00578                 CALL DATOS
0210   300A           00579                 MOVLW b'01010'
0211   2291           00580                 CALL DATOS
0212   301F           00581                 MOVLW b'11111'
0213   2291           00582                 CALL DATOS
0214   301F           00583                 MOVLW b'11111'
0215   2291           00584                 CALL DATOS
0216   301F           00585                 MOVLW b'11111'
0217   2291           00586                 CALL DATOS      
                      00587 
                      00588                 ;CUADRO 3 - ALMACENANDO - Nivel 3
0218   3000           00589                 MOVLW b'00000'
0219   2291           00590                 CALL DATOS
021A   300E           00591                 MOVLW b'01110'
021B   2291           00592                 CALL DATOS
021C   300A           00593                 MOVLW b'01010'
021D   2291           00594                 CALL DATOS
021E   300A           00595                 MOVLW b'01010'
021F   2291           00596                 CALL DATOS
0220   300E           00597                 MOVLW b'01110'
0221   2291           00598                 CALL DATOS
0222   301F           00599                 MOVLW b'11111'
0223   2291           00600                 CALL DATOS
0224   301F           00601                 MOVLW b'11111'
0225   2291           00602                 CALL DATOS
0226   301F           00603                 MOVLW b'11111'
0227   2291           00604                 CALL DATOS      
                      00605 
                      00606                 ;CUADRO 4 - ALMACENANDO - Nivel 4
0228   3000           00607                 MOVLW b'00000'
0229   2291           00608                 CALL DATOS
022A   300E           00609                 MOVLW b'01110'
022B   2291           00610                 CALL DATOS
022C   300A           00611                 MOVLW b'01010'
022D   2291           00612                 CALL DATOS
022E   300E           00613                 MOVLW b'01110'
022F   2291           00614                 CALL DATOS
0230   300E           00615                 MOVLW b'01110'
0231   2291           00616                 CALL DATOS
0232   301F           00617                 MOVLW b'11111'
0233   2291           00618                 CALL DATOS
0234   301F           00619                 MOVLW b'11111'
0235   2291           00620                 CALL DATOS
0236   301F           00621                 MOVLW b'11111'
0237   2291           00622                 CALL DATOS      
                      00623 
                      00624                 ;CUADRO 5 - ALMACENANDO - Nivel 5
0238   3000           00625                 MOVLW b'00000'
0239   2291           00626                 CALL DATOS
023A   300E           00627                 MOVLW b'01110'
023B   2291           00628                 CALL DATOS
023C   300E           00629                 MOVLW b'01110'
023D   2291           00630                 CALL DATOS
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

023E   300E           00631                 MOVLW b'01110'
023F   2291           00632                 CALL DATOS
0240   300E           00633                 MOVLW b'01110'
0241   2291           00634                 CALL DATOS
0242   301F           00635                 MOVLW b'11111'
0243   2291           00636                 CALL DATOS
0244   301F           00637                 MOVLW b'11111'
0245   2291           00638                 CALL DATOS
0246   301F           00639                 MOVLW b'11111'
0247   2291           00640                 CALL DATOS              
                      00641                 
                      00642                 ;COLOCA EN PRIMERA LINEA DEL DISPLAY
0248   3080           00643                 MOVLW 0X80
0249   228A           00644                 CALL COMANDO
024A   22A3           00645                 CALL RET100MS
                      00646 
                      00647 
024B   3001           00648                 MOVLW h'1'
Message[305]: Using default destination of 1 (file).
024C   02B0           00649                 SUBWF resNivel  ;resNivel-1     
024D   1903           00650                 BTFSC STATUS,Z  ;== 0?
024E   2A5F           00651                 GOTO BATERIA1   ;SI
Message[305]: Using default destination of 1 (file).
024F   02B0           00652                 SUBWF resNivel  ;Else, resNivel-1       
0250   1903           00653                 BTFSC STATUS,Z  ;== 0?
0251   2A62           00654                 GOTO BATERIA2   ;SI
Message[305]: Using default destination of 1 (file).
0252   02B0           00655                 SUBWF resNivel  ;Else, resNivel-1       
0253   1903           00656                 BTFSC STATUS,Z  ;== 0?
0254   2A65           00657                 GOTO BATERIA3   ;SI
Message[305]: Using default destination of 1 (file).
0255   02B0           00658                 SUBWF resNivel  ;Else, resNivel-1       
0256   1903           00659                 BTFSC STATUS,Z  ;== 0?
0257   2A68           00660                 GOTO BATERIA4   ;SI
Message[305]: Using default destination of 1 (file).
0258   02B0           00661                 SUBWF resNivel  ;Else, resNivel-1       
0259   1903           00662                 BTFSC STATUS,Z  ;== 0?
025A   2A6B           00663                 GOTO BATERIA5   ;SI             
025B   2A5C           00664                 GOTO BATERIA0   ;.-. Sepa a donde fue
                      00665 
025C   3000           00666 BATERIA0:MOVLW 0x00 ;Cuadro 0 - Vacio
025D   2291           00667                   CALL DATOS
025E   2A6E           00668                   GOTO HOLD_CAR
                      00669 
025F   3001           00670 BATERIA1: MOVLW 0X01 ;Cuadro 1 - Nivel 1
0260   2291           00671                   CALL DATOS
0261   2A6E           00672                   GOTO HOLD_CAR
                      00673 
0262   3002           00674 BATERIA2: MOVLW 0X02 ;Cuadro 2 - Nivel 2
0263   2291           00675                   CALL DATOS
0264   2A6E           00676                   GOTO HOLD_CAR
                      00677 
0265   3003           00678 BATERIA3: MOVLW 0X03 ;Cuadro 3 - Nivel 3
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0266   2291           00679                   CALL DATOS
0267   2A6E           00680                   GOTO HOLD_CAR
                      00681 
0268   3004           00682 BATERIA4: MOVLW 0X04 ;Cuadro 4 - Nivel 4
0269   2291           00683                   CALL DATOS
026A   2A6E           00684                   GOTO HOLD_CAR
                      00685 
026B   3005           00686 BATERIA5: MOVLW 0X05 ;Cuadro 5 - Nivel 5
026C   2291           00687                   CALL DATOS
026D   2A6E           00688                   GOTO HOLD_CAR
                      00689 
026E   0809           00690 HOLD_CAR:       MOVF PORTE,W
026F   3C04           00691                         SUBLW 0x04 ;  W<--W-0x40
0270   1903           00692                         BTFSC STATUS,Z  ;¿(CONTA)=0X40?
0271   2A6E           00693                         GOTO HOLD_CAR ;SI                       
0272   3001           00694                         MOVLW 0x01              ;Limpia Display
0273   228A           00695                         CALL COMANDO
0274   3080           00696                         MOVLW 0x80              ;regresa a inicio linea 1
0275   228A           00697                         CALL COMANDO
0276   0180           00698                         CLRF W
0277   281F           00699                         GOTO LOOP_P     
                      00700 
                      00701                         
0278   281F           00702 DEFAULT:        GOTO LOOP_P             ;Caso por defecto, no hace nada, retorna al loop para evaluar lo
                            s bits de control
                      00703 
0279   3030           00704 INICIA_LCD:     MOVLW 0x30
027A   228A           00705                         CALL COMANDO
027B   22A3           00706                         CALL RET100MS
027C   3030           00707                         MOVLW 0x30
027D   228A           00708                         CALL COMANDO
027E   22A3           00709                         CALL RET100MS
027F   3038           00710                         MOVLW 0x38
0280   228A           00711                         CALL COMANDO
0281   300C           00712                         MOVLW 0x0C
0282   228A           00713                         CALL COMANDO
0283   3001           00714                         MOVLW 0x01
0284   228A           00715                         CALL COMANDO
0285   3006           00716                         MOVLW 0x06
0286   228A           00717                         CALL COMANDO
0287   3002           00718                         MOVLW 0x02
0288   228A           00719                         CALL COMANDO
0289   0008           00720                         RETURN
028A   0086           00721 COMANDO:        MOVWF PORTB
028B   229A           00722                         CALL RET200
028C   1085           00723                         BCF PORTA,1
028D   1505           00724                         BSF     PORTA,2
028E   229A           00725                         CALL RET200
028F   1105           00726                         BCF PORTA,2
0290   0008           00727                         RETURN
0291   0086           00728 DATOS:          MOVWF PORTB
0292   229A           00729                         CALL RET200
0293   1485           00730                         BSF PORTA,1
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0294   1505           00731                         BSF     PORTA,2
0295   229A           00732                         CALL RET200
0296   1105           00733                         BCF PORTA,2
0297   229A           00734                         CALL RET200
0298   229A           00735                         CALL RET200
0299   0008           00736                         RETURN
029A   30AA           00737 RET200:         MOVLW 0xAA
029B   00A1           00738                         MOVWF valor1
029C   30A4           00739 LOOP:           MOVLW d'164'
029D   00A0           00740                         MOVWF valor
029E   0BA0           00741 LOOP1:          DECFSZ valor,1
029F   2A9E           00742                         GOTO LOOP1
02A0   0BA1           00743                         DECFSZ valor1,1
02A1   2A9C           00744                         GOTO LOOP
02A2   0008           00745                         RETURN
02A3   3003           00746 RET100MS:       MOVLW 0x03
02A4   00A0           00747                         MOVWF valor
02A5   30FF           00748 TRES:           MOVLW 0xFF
02A6   00A1           00749                         MOVWF valor1
02A7   30FF           00750 DOS:            MOVLW 0xFF
02A8   00A2           00751                         MOVWF valor2
Message[305]: Using default destination of 1 (file).
02A9   0BA2           00752 UNO:            DECFSZ valor2
02AA   2AA9           00753                         GOTO UNO
Message[305]: Using default destination of 1 (file).
02AB   0BA1           00754                         DECFSZ valor1
02AC   2AA7           00755                         GOTO DOS
Message[305]: Using default destination of 1 (file).
02AD   0BA0           00756                         DECFSZ valor
02AE   2AA5           00757                         GOTO TRES
02AF   0008           00758                         RETURN
                      00759 
02B0   3053           00760 RETARDO:        MOVLW cte1              ;SUBRUTINA DE RETARDO DE 50us   --valido
02B1   00A1           00761                         MOVWF valor1
Message[305]: Using default destination of 1 (file).
02B2   0BA1           00762 LOOPR:          DECFSZ valor1
02B3   2AB2           00763                         GOTO LOOPR
02B4   0008           00764                         RETURN
                      00765                 END
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BATERIA0                          0000025C
BATERIA1                          0000025F
BATERIA2                          00000262
BATERIA3                          00000265
BATERIA4                          00000268
BATERIA5                          0000026B
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BINARIO                           000000B7
BRGH                              00000002
C                                 00000000
CARGA                             000001E2
CASO0                             00000094
CASO0B                            0000010A
CASO0BC                           00000196
CASO0BD                           0000013E
CASO1                             00000096
CASO1A                            0000010E
CASO1AC                           00000198
CASO1AD                           00000142
CASO1B                            00000113
CASO1BC                           0000019D
CASO1BD                           00000147
CASO2                             00000098
CASO2A                            00000117
CASO2AC                           0000019F
CASO2AD                           0000014B
CASO2B                            0000011C
CASO2BC                           000001A4
CASO2BD                           00000150
CASO3                             0000009A
CASO3A                            00000120
CASO3AC                           000001A6
CASO3AD                           00000154
CASO3B                            00000125
CASO3BC                           000001AB
CASO3BD                           00000159
CASO4                             0000009C
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

CASO4A                            00000129
CASO4AC                           000001AD
CASO4AD                           0000015D
CASO4B                            0000012E
CASO4BD                           00000162
CASO5                             0000009E
CASO5A                            00000132
CASO5AD                           00000166
CASO5BD                           0000016B
CASO6                             000000A0
CASO6AD                           0000016F
CASO6BD                           00000174
CASO7                             000000A2
CASO7AD                           00000178
CASO7BD                           0000017D
CASO8                             000000A4
CASO8AD                           00000181
CASO8BD                           00000186
CASO9                             000000A6
CASO9AD                           0000018A
CASOA                             000000A8
CASOB                             000000AA
CASOC                             000000AC
CASOD                             000000AE
CASOE                             000000B0
CASOF                             000000B2
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CENVOLT                           0000018F
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

CKP                               00000004
COMANDO                           0000028A
CONTINUA                          00000023
CONVEND                           000000B4
CONVERHEXA                        00000082
CREN                              00000004
CSRC                              00000007
CentesimaEncontrada               00000061
D                                 00000005
DATA_ADDRESS                      00000005
DATOS                             00000291
DC                                00000001
DECIMAL                           00000037
DECVOLT                           00000137
DEFAULT                           00000278
DOS                               000002A7
D_A                               00000005
DecimaEncontrada                  00000063
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ESPERA                            00000021
ES_CERO                           000000E9
ES_UNO                            000000E6
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
HEXADECIMAL                       00000065
HOLD_BIN                          000000DC
HOLD_CAR                          0000026E
HOLD_DECIMAL                      00000057
HOLD_HEX                          00000078
HOLD_VOL                          000000FB
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INICIA_LCD                        00000279
INICIO                            00000005
INTCON                            0000000B
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LOOP                              0000029C
LOOP1                             0000029E
LOOPR                             000002B2
LOOP_Centesimas                   00000040
LOOP_Decimas                      00000046
LOOP_P                            0000001F
MostrarDigitos                    0000004E
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRUEBA                            00000030
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RET100MS                          000002A3
RET200                            0000029A
RETARDO                           000002B0
RETOMACV                          000001AF
RETOMADV                          0000018E
RETOMAV                           00000136
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRES                              000002A5
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
UNIVOLT                           00000105
UNO                               000002A9
V0                                000001B0
V1                                000001B5
V2                                000001BA
V3                                000001BF
V4                                000001C4
V5                                000001C9
V6                                000001CE
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

V7                                000001D3
V8                                000001D8
V9                                000001DD
VOLTAJE                           000000EC
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
aux                               00000027
contadorCentesima                 00000023
contadorDecima                    00000024
contadorUnidad                    00000025
conver                            00000029
cte1                              00000053
regaux                            00000027
regaux2                           00000028
resNivel                          00000030
valor                             00000020
valor1                            00000021
valor2                            00000022
MPASM 03.80 Released                            PROYECTO3.ASM   5-8-2023  0:30:28         PAGE 24


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0000 : X----XXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXX-----------

All other memory blocks unused.

Program Memory Words Used:   689
Program Memory Words Free:  7503


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    22 reported,     0 suppressed

