MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001                 PROCESSOR 16F877
                      00002                 INCLUDE <P16F877.INC>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F877 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
Message[301]: MESSAGE: (Processor-header file mismatch.  Verify selected processor.)
                      00540         LIST
                      00003                 
  00000020            00004 valor   equ h'20'                       ;Registros auxiliares para rutina de retardo
  00000021            00005 valor1  equ h'21'
  00000022            00006 valor2  equ h'22'
  00000023            00007 contadorCentesima equ h'23'     ;Registros auxiliares para conversión Hexa - Decimal
  00000024            00008 contadorDecima equ h'24'
  00000025            00009 contadorUnidad equ h'25'
  00000027            00010 aux equ h'27'
  00000027            00011 regaux equ h'27'                        ;Registros auxiliares para visualizar en Hexadecimal
  00000028            00012 regaux2 equ h'28'
  00000029            00013 conver equ h'29'
  00000030            00014 resNivel equ h'30'
  00000053            00015 cte1 equ .83
0000                  00016                         ORG 0 ;Vector de reset
0000   2805           00017                         GOTO INICIO
0005                  00018                         ORG 5
                      00019 
0005   0185           00020 INICIO:         CLRF PORTA ; Limpia PORTA
0006   0186           00021                         CLRF PORTB ; Limpia PORTB
0007   0187           00022                         CLRF PORTC      ; Limpia PORTC
0008   0188           00023                         CLRF PORTD      ; Limpia PORTD
0009   0189           00024                         CLRF PORTE      ; Limpia PORTE
000A   1683           00025                         BSF STATUS,5 ; Cambia a banco 1
000B   1303           00026                         BCF STATUS,6
000C   3000           00027                         MOVLW 0x00
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000D   0086           00028                         MOVWF TRISB     ;TRISB<- 0x00 configuramos puerto B como salida
000E   3000           00029                         MOVLW H'0'              ; CONFIGURA PUERTO C COMO SALIDA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000F   0087           00030                         MOVWF TRISC             ; (TRISC) <-- 0h
0010   30FF           00031                         MOVLW 0xFF              ; CONFIGURA PUERTO D COMO ENTRADA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0011   0088           00032                         MOVWF TRISD             ; (TRISD) <-- FFh
0012   30FF           00033                         MOVLW 0xFF              ; CONFIGURA PUERTO E COMO ENTRADA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0013   0089           00034                         MOVWF TRISE             ; (TRISE) <-- FFh
                      00035                         ;MOVLW 0x01     
                      00036                         ;MOVWF TRISA     ;TRISA <- 0x01, configura puerto A como salida excepto el bit 0
                             
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0014   0185           00037                         CLRF TRISA              ;limpia TRISA, todos los pines son salidas
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0015   1405           00038                         BSF TRISA,0             ;el bit 0 de PORTA es entrada
0016   300E           00039                         MOVLW 0x0E              ;1110, hace al bit 0 del puerto A analógico y el resto d
                            igitales
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   009F           00040                         MOVWF ADCON1    ;ADCON1 <- 0x0E, configura puerto A y E como entradas digitales 
                            exceptuando el bit 0 del puerto A
0018   1283           00041                         BCF STATUS,5    ;Regresamos al banco 0
0019   2258           00042                         CALL INICIA_LCD
001A   3080           00043                         MOVLW 0x80
001B   2269           00044                         CALL COMANDO
001C   3001           00045                         MOVLW B'00000001' ;ADFM=0,se configura el canal 0 (PORTA.0) como la entrada al c
                            onvertidor. Frecuencia de oscilador Fosc/2, se enciende el modulo convertidor
001D   009F           00046                         MOVWF ADCON0    ;ADCON0<-W
001E   228F           00047                         CALL RETARDO    ;retardo de 50us
                      00048                         
001F   228F           00049 LOOP_P:         CALL RETARDO
0020   151F           00050                         BSF ADCON0,GO   ;ADCON0.GO<- 1, iniciamos la conversion
0021   191F           00051 ESPERA:         BTFSC ADCON0,GO ;¿ADCON0.GO==0?
0022   2821           00052                         GOTO ESPERA             ;se retiene hasta que termine la conversion     
0023   081E           00053 CONTINUA:       MOVF ADRESH,W   ;W<-ADRESH
0024   00A9           00054                         MOVWF conver    ;(conver)<- W                   almacenamos el resultado de la c
                            onversion en conver
0025   0809           00055                         MOVF PORTE,W    ;W<-- (PORTE)
0026   3907           00056                         ANDLW 7                 ;W <-- W&00000111
0027   0782           00057                         ADDWF PCL,F             ;(PCL)<-- (PCL)+W
0028   2837           00058                         GOTO DECIMAL    ;PC+0   -> Switches: 000        Conversión entrada dipswitch de 
                            8 bits a decimal
0029   2865           00059                         GOTO HEXADECIMAL;PC+1   -> Switches: 001        Conversión entrada dipswitch de 
                            8 bits a hexadecimal
002A   28B7           00060                         GOTO BINARIO    ;PC+2   -> Switches: 010        Conversión entrada dipswitch de 
                            8 bits a binario
002B   28EC           00061                         GOTO VOLTAJE    ;PC+3   -> Switches: 011        
002C   29D8           00062                         GOTO CARGA              ;PC+4   -> Switches: 100
002D   2830           00063                         GOTO PRUEBA             ;PC+5 -> Switches: 101
002E   2A57           00064                         GOTO DEFAULT    ;PC+6 -> -> Switches: 110
002F   2A57           00065                         GOTO DEFAULT    ;PC+7 -> -> Switches: 111
                      00066 
0030   3050           00067 PRUEBA:         MOVLW a'P'
0031   2270           00068                         CALL DATOS
0032   3001           00069                         MOVLW 0x01                              ;NO, Limpia Display
0033   2269           00070                         CALL COMANDO
0034   3080           00071                         MOVLW 0x80                      ;regresa a inicio linea 1
0035   2269           00072                         CALL COMANDO
0036   281F           00073                         GOTO LOOP_P
0037   01A3           00074 DECIMAL:        CLRF contadorCentesima          ;Inicializa en 0
0038   01A4           00075                         CLRF contadorDecima                     ;Inicializa en 0
0039   01A5           00076                         CLRF contadorUnidad                     ;Inicializa en 0
003A   3044           00077                         MOVLW a'D'
003B   2270           00078                         CALL DATOS
003C   303A           00079                         MOVLW 0x3A              ;Dos puntos
003D   2270           00080                         CALL DATOS
003E   0829           00081                         MOVF conver,W   ;Leer el valor de los switches y lo almacena en aux
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003F   00A7           00082                         MOVWF aux       
                      00083         
0040   3064           00084 LOOP_Centesimas:MOVLW 0x64                              ;Restar 100
Message[305]: Using default destination of 1 (file).
0041   02A7           00085                                 SUBWF aux
0042   1803           00086                                 BTFSC STATUS,C                  ;Verifica el estado de carry
0043   2861           00087                                 GOTO CentesimaEncontrada        ;SI hay carry, el resultado es un número
                             positivo                               
0044   3064           00088                                 MOVLW 0x64
Message[305]: Using default destination of 1 (file).
0045   07A7           00089                                 ADDWF aux                                       ;NO hay carry, entonces 
                            recuperar residuo
0046   300A           00090 LOOP_Decimas:   MOVLW 0x0A
Message[305]: Using default destination of 1 (file).
0047   02A7           00091                                 SUBWF aux                               ;Restar 10
0048   1803           00092                                 BTFSC STATUS,C                  ;Verifica el estado de carry
0049   2863           00093                                 GOTO DecimaEncontrada           ;SI hay carry, el resultado es un número
                             positivo
004A   300A           00094                                 MOVLW 0x0A
Message[305]: Using default destination of 1 (file).
004B   07A7           00095                                 ADDWF aux                                       ;NO hay carry, entonces 
                            recuperar residuo = Unidades
004C   0827           00096                                 MOVF aux,w
004D   00A5           00097                                 MOVWF contadorUnidad    ;Guardar en contador
                      00098 
004E   0823           00099 MostrarDigitos: MOVF contadorCentesima,W        
004F   3E30           00100                                 ADDLW 0x30                                      ;Obtener valor ASCII
0050   2270           00101                                 CALL DATOS                                      ;Display Centesimas
0051   0824           00102                                 MOVF contadorDecima,W           
0052   3E30           00103                                 ADDLW 0x30                                      ;Obtener valor ASCII
0053   2270           00104                                 CALL DATOS                                      ;Display Decimas
0054   0825           00105                                 MOVF contadorUnidad,W           
0055   3E30           00106                                 ADDLW 0x30                                      ;Obtener valor ASCII
0056   2270           00107                                 CALL DATOS                                      ;Display Unidades
                      00108 
0057   0809           00109 HOLD_DECIMAL:   MOVF PORTE,W
0058   3C01           00110                                 SUBLW 0x01              ;W<--W-0x10
0059   1903           00111                                 BTFSC STATUS,Z          ;¿(CONTA)=0X10?
005A   2857           00112                                 GOTO HOLD_DECIMAL               ;SI                     
005B   3001           00113                                 MOVLW 0x01                              ;NO, Limpia Display
005C   2269           00114                                 CALL COMANDO
005D   3080           00115                                 MOVLW 0x80                      ;regresa a inicio linea 1
005E   2269           00116                                 CALL COMANDO
005F   0180           00117                                 CLRF W
0060   281F           00118                                 GOTO LOOP_P     
                      00119 
Message[305]: Using default destination of 1 (file).
0061   0AA3           00120 CentesimaEncontrada:INCF contadorCentesima
0062   2840           00121                                         GOTO LOOP_Centesimas
                      00122 
Message[305]: Using default destination of 1 (file).
0063   0AA4           00123 DecimaEncontrada:       INCF contadorDecima     
0064   2846           00124                                         GOTO LOOP_Decimas
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00125 
0065   3048           00126 HEXADECIMAL:MOVLW a'H'
0066   2270           00127                         CALL DATOS
0067   303A           00128                         MOVLW 0x3A              ;Dos puntos
0068   2270           00129                         CALL DATOS
0069   0180           00130                         CLRF W
006A   0829           00131                         MOVF conver,W
006B   00A8           00132                         MOVWF regaux2
006C   0828           00133                         MOVF regaux2,W  ;restauramos el valor guardado por si acaso sufriese algun cambi
                            o
006D   39F0           00134                         ANDLW 0xF0              ;extraemos la parte alta
006E   00A7           00135                         MOVWF regaux    ;regaux <- W
006F   0CA7           00136                         RRF regaux,f
0070   0CA7           00137                         RRF regaux,f
0071   0CA7           00138                         RRF regaux,f
0072   0CA7           00139                         RRF regaux,f    ;convertida en parte baja
0073   2082           00140                         CALL CONVERHEXA
0074   0828           00141                         MOVF regaux2,W  ;restauramos el valor guardado por si acaso sufriese algun cambi
                            o
0075   390F           00142                         ANDLW 0x0F              ;extraemos la parte BAJA
0076   00A7           00143                         MOVWF regaux    ;regaux <- W
0077   2082           00144                         CALL CONVERHEXA
0078   0809           00145 HOLD_HEX:       MOVF PORTE,W            ;FUNCION PARA RETENER EL RESULTADO EN LCD
0079   3C01           00146                         SUBLW 0x01 ;  W<--W-0x30
007A   1903           00147                         BTFSC STATUS,Z  ;¿(CONTA)=0X20?
007B   2878           00148                         GOTO HOLD_HEX   ;SI                     
007C   3001           00149                         MOVLW 0x01              ;NO, Limpia Display
007D   2269           00150                         CALL COMANDO
007E   3080           00151                         MOVLW 0x80              ;regresa a inicio linea 1
007F   2269           00152                         CALL COMANDO
0080   0180           00153                         CLRF W
0081   281F           00154                         GOTO LOOP_P     
0082   0827           00155 CONVERHEXA:     MOVF regaux,W   ; W<- (regaux)
                      00156                         ;ANDLW 15                       ;W <-- W&00001111, el cuarto bit siempre está ac
                            tivo para las letras
0083   0782           00157                         ADDWF PCL,F             ;(PCL)<-- (PCL)+W
0084   2894           00158                         GOTO CASO0              ;PC+0   Caso 0000: Numero 0
0085   2896           00159                         GOTO CASO1              ;PC+1   Caso 0001: Numero 1
0086   2898           00160                         GOTO CASO2              ;PC+2   Caso 0010: Numero 2
0087   289A           00161                         GOTO CASO3              ;PC+3   Caso 0011: Numero 3
0088   289C           00162                         GOTO CASO4              ;PC+4   Caso 0100: Numero 4
0089   289E           00163                         GOTO CASO5              ;PC+5   Caso 0101: Numero 5
008A   28A0           00164                         GOTO CASO6              ;PC+6   Caso 0110: Numero 6
008B   28A2           00165                         GOTO CASO7              ;PC+7   Caso 0111: Numero 7
008C   28A4           00166                         GOTO CASO8              ;PC+8   Caso 1000: Numero 8
008D   28A6           00167                         GOTO CASO9              ;PC+9   Caso 1001: Numero 9
008E   28A8           00168                         GOTO CASOA              ;PC+10  Caso 1010: Letra A 
008F   28AA           00169                         GOTO CASOB              ;PC+11  Caso 1011: Letra B 
0090   28AC           00170                         GOTO CASOC              ;PC+12  Caso 1100: Letra C 
0091   28AE           00171                         GOTO CASOD              ;PC+13  Caso 1101: Letra D 
0092   28B0           00172                         GOTO CASOE              ;PC+14  Caso 1110: Letra E 
0093   28B2           00173                         GOTO CASOF              ;PC+15  Caso 1111: Letra F 
0094   3030           00174 CASO0:          MOVLW a'0'
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0095   28B4           00175                         GOTO CONVEND
0096   3031           00176 CASO1:          MOVLW a'1'
0097   28B4           00177                         GOTO CONVEND
0098   3032           00178 CASO2:          MOVLW a'2'
0099   28B4           00179                         GOTO CONVEND
009A   3033           00180 CASO3:          MOVLW a'3'
009B   28B4           00181                         GOTO CONVEND
009C   3034           00182 CASO4:          MOVLW a'4'
009D   28B4           00183                         GOTO CONVEND
009E   3035           00184 CASO5:          MOVLW a'5'
009F   28B4           00185                         GOTO CONVEND
00A0   3036           00186 CASO6:          MOVLW a'6'
00A1   28B4           00187                         GOTO CONVEND
00A2   3037           00188 CASO7:          MOVLW a'7'
00A3   28B4           00189                         GOTO CONVEND
00A4   3038           00190 CASO8:          MOVLW a'8'
00A5   28B4           00191                         GOTO CONVEND
00A6   3039           00192 CASO9:          MOVLW a'9'
00A7   28B4           00193                         GOTO CONVEND
00A8   3041           00194 CASOA:          MOVLW a'A'
00A9   28B4           00195                         GOTO CONVEND
00AA   3042           00196 CASOB:          MOVLW a'B'
00AB   28B4           00197                         GOTO CONVEND
00AC   3043           00198 CASOC:          MOVLW a'C'
00AD   28B4           00199                         GOTO CONVEND
00AE   3044           00200 CASOD:          MOVLW a'D'
00AF   28B4           00201                         GOTO CONVEND
00B0   3045           00202 CASOE:          MOVLW a'E'
00B1   28B4           00203                         GOTO CONVEND
00B2   3046           00204 CASOF:          MOVLW a'F'
00B3   28B4           00205                         GOTO CONVEND
                      00206 
00B4   2270           00207 CONVEND:        CALL DATOS              ; Imprimimos el simbolo en el LCD
00B5   0180           00208                         CLRF W
00B6   0008           00209                         RETURN
                      00210 
00B7   0829           00211 BINARIO:        MOVF conver,W
00B8   3042           00212                         MOVLW a'B'
00B9   2270           00213                         CALL DATOS
00BA   303A           00214                         MOVLW 0x3A              ;Dos puntos
00BB   2270           00215                         CALL DATOS
                      00216                         ;CLRF conver            ;PRUEBA DE FUNCIÓN
00BC   1BA9           00217                         BTFSC conver,7
00BD   20E6           00218                         CALL ES_UNO
00BE   1FA9           00219                         BTFSS conver,7
00BF   20E9           00220                         CALL ES_CERO
00C0   1B29           00221                         BTFSC conver,6
00C1   20E6           00222                         CALL ES_UNO
00C2   1F29           00223                         BTFSS conver,6
00C3   20E9           00224                         CALL ES_CERO
00C4   1AA9           00225                         BTFSC conver,5
00C5   20E6           00226                         CALL ES_UNO
00C6   1EA9           00227                         BTFSS conver,5
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00C7   20E9           00228                         CALL ES_CERO
00C8   1A29           00229                         BTFSC conver,4
00C9   20E6           00230                         CALL ES_UNO
00CA   1E29           00231                         BTFSS conver,4
00CB   20E9           00232                         CALL ES_CERO
00CC   19A9           00233                         BTFSC conver,3
00CD   20E6           00234                         CALL ES_UNO
00CE   1DA9           00235                         BTFSS conver,3
00CF   20E9           00236                         CALL ES_CERO
00D0   1929           00237                         BTFSC conver,2
00D1   20E6           00238                         CALL ES_UNO
00D2   1D29           00239                         BTFSS conver,2
00D3   20E9           00240                         CALL ES_CERO
00D4   18A9           00241                         BTFSC conver,1
00D5   20E6           00242                         CALL ES_UNO
00D6   1CA9           00243                         BTFSS conver,1
00D7   20E9           00244                         CALL ES_CERO
00D8   1829           00245                         BTFSC conver,0
00D9   20E6           00246                         CALL ES_UNO
00DA   1C29           00247                         BTFSS conver,0
00DB   20E9           00248                         CALL ES_CERO
00DC   0809           00249 HOLD_BIN:       MOVF PORTE,W
00DD   3C02           00250                         SUBLW 0x02 ;  W<--W-0x30
00DE   1903           00251                         BTFSC STATUS,Z  ;¿(CONTA)=0X30?
00DF   28DC           00252                         GOTO HOLD_BIN ;SI                       
00E0   3001           00253                         MOVLW 0x01              ;Limpia Display
00E1   2269           00254                         CALL COMANDO
00E2   3080           00255                         MOVLW 0x80              ;regresa a inicio linea 1
00E3   2269           00256                         CALL COMANDO
00E4   0180           00257                         CLRF W
00E5   281F           00258                         GOTO LOOP_P             
00E6   3031           00259 ES_UNO:         MOVLW a'1'
00E7   2270           00260                         CALL DATOS
00E8   0008           00261                         RETURN
00E9   3030           00262 ES_CERO         MOVLW a'0'
00EA   2270           00263                         CALL DATOS
00EB   0008           00264                         RETURN
                      00265 
00EC   2105           00266 VOLTAJE:        CALL UNIVOLT    ;Caso para mostrar Voltaje leído en decimal. Resolucion de 1
00ED   302E           00267                         MOVLW a'.'
00EE   2270           00268                         CALL DATOS
00EF   2137           00269                         CALL DECVOLT
00F0   218F           00270                         CALL CENVOLT
00F1   3020           00271                         MOVLW a' '
00F2   2270           00272                         CALL DATOS
00F3   3056           00273                         MOVLW a'V'
00F4   2270           00274                         CALL DATOS
00F5   306F           00275                         MOVLW a'o'
00F6   2270           00276                         CALL DATOS
00F7   306C           00277                         MOVLW a'l'
00F8   2270           00278                         CALL DATOS
00F9   3073           00279                         MOVLW a's'
00FA   2270           00280                         CALL DATOS
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00FB   0809           00281 HOLD_VOL:       MOVF PORTE,W
00FC   3C03           00282                         SUBLW 0x03 ;  W<--W-0x30
00FD   1903           00283                         BTFSC STATUS,Z  ;¿(CONTA)=0X30?
00FE   28FB           00284                         GOTO HOLD_VOL ;SI                       
00FF   3001           00285                         MOVLW 0x01              ;Limpia Display
0100   2269           00286                         CALL COMANDO
0101   3080           00287                         MOVLW 0x80              ;regresa a inicio linea 1
0102   2269           00288                         CALL COMANDO
0103   0180           00289                         CLRF W
0104   281F           00290                         GOTO LOOP_P                             
0105   0829           00291 UNIVOLT:        MOVF conver,W   ; Caso para obtener el nivel entero de volt leido (1-5)
0106   3C33           00292                         SUBLW 0x33              ; 0x33-W                        51 niveles      (el caso
                             0 tiene realmente 52 casos con el nivel 0, pero no lo contamos
0107   1C03           00293                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x33<W
0108   290E           00294                         GOTO CASO1A             ;NO, ES MAYOR EL NUMERO
0109   290A           00295                         GOTO CASO0B             ;SI, ES MENOR EL NUMERO
010A   21B0           00296 CASO0B:         CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
010B   3000           00297                         MOVLW 0x00
010C   00A8           00298                         MOVWF regaux2   
010D   2936           00299                         GOTO RETOMAV
010E   0829           00300 CASO1A:         MOVF conver,W
010F   3C66           00301                         SUBLW 0x66              ;0110 0110  NIVEL 102
0110   1C03           00302                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
0111   2917           00303                         GOTO CASO2A                     ;NO, ES MAYOR EL NUMERO
0112   2913           00304                         GOTO CASO1B                     ;SI, ES MENOR EL NUMERO
                      00305                         
0113   21B4           00306 CASO1B:         CALL V1 ;1.00-1.99V: 1  la condicion de pertenencia (al haberse evaluado la clase 0) es 
                            ser menor de 2
0114   3033           00307                         MOVLW 0x33
0115   00A8           00308                         MOVWF regaux2
0116   2936           00309                         GOTO RETOMAV
                      00310 
0117   0829           00311 CASO2A:         MOVF conver,W
0118   3C99           00312                         SUBLW 0x99              ;1001 1001  NIVEL 153
0119   1C03           00313                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x99<W
011A   2920           00314                         GOTO CASO3A                     ;NO, ES MAYOR EL NUMERO
011B   291C           00315                         GOTO CASO2B                     ;SI, ES MENOR EL NUMERO
011C   21B8           00316 CASO2B:         CALL V2                 ;2.00-2.99V: 2  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
011D   3066           00317                         MOVLW 0x66
011E   00A8           00318                         MOVWF regaux2
011F   2936           00319                         GOTO RETOMAV
0120   0829           00320 CASO3A:         MOVF conver,W
0121   3CCC           00321                         SUBLW 0xCC              ;1001 1001  NIVEL 204
0122   1C03           00322                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xcc<W
0123   2929           00323                         GOTO CASO4A                     ;NO, ES MAYOR EL NUMERO
0124   2925           00324                         GOTO CASO3B                     ;SI, ES MENOR EL NUMERO
0125   21BC           00325 CASO3B:         CALL V3                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0126   3099           00326                         MOVLW 0x99
0127   00A8           00327                         MOVWF regaux2
0128   2936           00328                         GOTO RETOMAV
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0129   0829           00329 CASO4A:         MOVF conver,W
012A   3CFF           00330                         SUBLW 0xFF              ;1111 1010  NIVEL 255
012B   1C03           00331                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
012C   2932           00332                         GOTO CASO5A             ;NO, ES MAYOR EL NUMERO
012D   292E           00333                         GOTO CASO4B             ;SI, ES MENOR EL NUMERO
012E   21C0           00334 CASO4B:         CALL V4                 ;4.00-4.99V: 4  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
012F   30CC           00335                         MOVLW 0xCC
0130   00A8           00336                         MOVWF regaux2
0131   2936           00337                         GOTO RETOMAV
0132   21C4           00338 CASO5A:         CALL V5                 ;5V: 5  la condicion de pertenencia (al haberse evaluado la clas
                            e 0) es ser menor de 2
0133   30FF           00339                         MOVLW 0xFF
0134   00A8           00340                         MOVWF regaux2
0135   2936           00341                         GOTO RETOMAV
0136   0008           00342 RETOMAV:        RETURN
                      00343 ;EVALUAMOS EL CASO DE LAS DECIMAS, SE RESTA LA UNIDAD
0137   0828           00344 DECVOLT:        MOVF regaux2,W  ;CASO DE DECIMAS.  
0138   0229           00345                         SUBWF conver,W  ; Restamos a la conversión el nivel base (la unidad del voltaje.
                             Asi, por ejemplo: 1.99 -> 0.99,  4.32 -> 0.32
                      00346                         ;MOVF conver,W  ; Caso para obtener el nivel entero de volt leido (1-5)
0139   00A7           00347                         MOVWF regaux    ; Guardamos el valor para restaurarlo en cada caso
013A   3C06           00348                         SUBLW 0x06              ; 0x06-W                        5 niveles       (0.0 - 0
                            .09)
013B   1C03           00349                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
013C   2942           00350                         GOTO CASO1AD            ;NO, ES MAYOR EL NUMERO
013D   293E           00351                         GOTO CASO0BD            ;SI, ES MENOR EL NUMERO
013E   21B0           00352 CASO0BD:        CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
013F   3000           00353                         MOVLW 0x00
0140   00A8           00354                         MOVWF regaux2
0141   298E           00355                         GOTO RETOMADV
0142   0827           00356 CASO1AD:        MOVF regaux,W
0143   3C0B           00357                         SUBLW 0x0B              ;0x0B-W   10 niveles (0.1-0.19)
0144   1C03           00358                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
0145   294B           00359                         GOTO CASO2AD                    ;NO, ES MAYOR EL NUMERO
0146   2947           00360                         GOTO CASO1BD                    ;SI, ES MENOR EL NUMERO
                      00361                         
0147   21B4           00362 CASO1BD:        CALL V1 ;1.00-1.99V: 1  la condicion de pertenencia (al haberse evaluado la clase 0) es 
                            ser menor de 2
0148   3006           00363                         MOVLW 0x06
0149   00A8           00364                         MOVWF regaux2
014A   298E           00365                         GOTO RETOMADV
                      00366 
014B   0827           00367 CASO2AD:        MOVF regaux,W
014C   3C10           00368                         SUBLW 0x10              ;0x10-W  15 niveles (0.2-0.29)
014D   1C03           00369                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x99<W
014E   2954           00370                         GOTO CASO3AD            ;NO, ES MAYOR EL NUMERO
014F   2950           00371                         GOTO CASO2BD            ;SI, ES MENOR EL NUMERO
0150   21B8           00372 CASO2BD:        CALL V2                 ;2.00-2.99V: 2  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0151   300B           00373                         MOVLW 0x0B
0152   00A8           00374                         MOVWF regaux2
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0153   298E           00375                         GOTO RETOMADV
0154   0827           00376 CASO3AD:        MOVF regaux,W
0155   3C15           00377                         SUBLW 0x15              ;0x15-W  20 niveles (0.3-0.39)
0156   1C03           00378                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xcc<W
0157   295D           00379                         GOTO CASO4AD                    ;NO, ES MAYOR EL NUMERO
0158   2959           00380                         GOTO CASO3BD                    ;SI, ES MENOR EL NUMERO
0159   21BC           00381 CASO3BD:        CALL V3                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
015A   3010           00382                         MOVLW 0x10
015B   00A8           00383                         MOVWF regaux2
015C   298E           00384                         GOTO RETOMADV
015D   0827           00385 CASO4AD:        MOVF regaux,W
015E   3C1A           00386                         SUBLW 0x1A              ;0x1A-W  25 niveles (0.4-0.49)
015F   1C03           00387                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0160   2966           00388                         GOTO CASO5AD            ;NO, ES MAYOR EL NUMERO
0161   2962           00389                         GOTO CASO4BD            ;SI, ES MENOR EL NUMERO
0162   21C0           00390 CASO4BD:        CALL V4                 ;4.00-4.99V: 4  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0163   3015           00391                         MOVLW 0x15
0164   00A8           00392                         MOVWF regaux2
0165   298E           00393                         GOTO RETOMADV
0166   0827           00394 CASO5AD:        MOVF regaux,W
0167   3C1F           00395                         SUBLW 0x1F              ;0x1F-W  30 niveles (0.5-0.59)
0168   1C03           00396                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0169   296F           00397                         GOTO CASO6AD            ;NO, ES MAYOR EL NUMERO
016A   296B           00398                         GOTO CASO5BD            ;SI, ES MENOR EL NUMERO
016B   21C4           00399 CASO5BD:        CALL V5                 
016C   301A           00400                         MOVLW 0x1A
016D   00A8           00401                         MOVWF regaux2
016E   298E           00402                         GOTO RETOMADV
016F   0827           00403 CASO6AD:        MOVF regaux,W
0170   3C24           00404                         SUBLW 0x24              ;0x24-W  35 niveles (0.6-0.69)
0171   1C03           00405                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0172   2978           00406                         GOTO CASO7AD            ;NO, ES MAYOR EL NUMERO
0173   2974           00407                         GOTO CASO6BD            ;SI, ES MENOR EL NUMERO
0174   21C8           00408 CASO6BD:        CALL V6                 
0175   301F           00409                         MOVLW 0x1F
0176   00A8           00410                         MOVWF regaux2
0177   298E           00411                         GOTO RETOMADV
0178   0827           00412 CASO7AD:        MOVF regaux,W
0179   3C29           00413                         SUBLW 0x29              ;0x29-W  40 niveles (0.7-0.79)
017A   1C03           00414                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
017B   2981           00415                         GOTO CASO8AD            ;NO, ES MAYOR EL NUMERO
017C   297D           00416                         GOTO CASO7BD            ;SI, ES MENOR EL NUMERO
017D   21CC           00417 CASO7BD:        CALL V7                 
017E   3024           00418                         MOVLW 0x24
017F   00A8           00419                         MOVWF regaux2
0180   298E           00420                         GOTO RETOMADV
0181   0827           00421 CASO8AD:        MOVF regaux,W
0182   3C2E           00422                         SUBLW 0x2E              ;0x1A-W  45 niveles (0.8-0.89)
0183   1C03           00423                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0xFF<W
0184   298A           00424                         GOTO CASO9AD            ;NO, ES MAYOR EL NUMERO
0185   2986           00425                         GOTO CASO8BD            ;SI, ES MENOR EL NUMERO
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0186   21D0           00426 CASO8BD:        CALL V8                 
0187   3029           00427                         MOVLW 0x29
0188   00A8           00428                         MOVWF regaux2
0189   298E           00429                         GOTO RETOMADV
018A   21D4           00430 CASO9AD:        CALL V9
018B   302E           00431                         MOVLW 0x2E
018C   00A8           00432                         MOVWF regaux2           
018D   298E           00433                         GOTO RETOMADV
018E   0008           00434 RETOMADV:       RETURN
                      00435 ;EVALUAMOS LAS CENTESIMAS, SE RESTA LAS DECENAS
018F   0828           00436 CENVOLT:        MOVF regaux2,W  ;CASO DE CENTESIMAS.  
0190   0227           00437                         SUBWF regaux,W  ; Restamos a la conversión el nivel base (la unidad del voltaje.
                             Asi, por ejemplo: 1.99 -> 0.99,  4.32 -> 0.32
                      00438                         ;MOVF conver,W  ; Caso para obtener el nivel entero de volt leido (1-5)
0191   00A7           00439                         MOVWF regaux    ; Guardamos el valor para restaurarlo en cada caso
0192   3C01           00440                         SUBLW 0x01              ; 0x01-W                        1 niveles       (0.0)
0193   1C03           00441                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x01<W
0194   2998           00442                         GOTO CASO1AC            ;NO, ES MAYOR EL NUMERO
0195   2996           00443                         GOTO CASO0BC            ;SI, ES MENOR EL NUMERO
0196   21B0           00444 CASO0BC:        CALL V0                 ;0.00-0.99V: 0  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
0197   29AF           00445                         GOTO RETOMACV
0198   0827           00446 CASO1AC:        MOVF regaux,W
0199   3C02           00447                         SUBLW 0x02              ;0x02-W   1 niveles (0.02)
019A   1C03           00448                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x66<W
019B   299F           00449                         GOTO CASO2AC                    ;NO, ES MAYOR EL NUMERO
019C   299D           00450                         GOTO CASO1BC                    ;SI, ES MENOR EL NUMERO
                      00451                         
019D   21B8           00452 CASO1BC:        CALL V2                 ;Se imprime 2, la resolución minima para las centésimas es de 0.
                            02
019E   29AF           00453                         GOTO RETOMACV
                      00454 
019F   0827           00455 CASO2AC:        MOVF regaux,W
01A0   3C03           00456                         SUBLW 0x03              ;0x03-W  1 niveles (0.04)
01A1   1C03           00457                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x03<W
01A2   29A6           00458                         GOTO CASO3AC            ;NO, ES MAYOR EL NUMERO
01A3   29A4           00459                         GOTO CASO2BC            ;SI, ES MENOR EL NUMERO
01A4   21C0           00460 CASO2BC:        CALL V4         
01A5   29AF           00461                         GOTO RETOMACV
01A6   0827           00462 CASO3AC:        MOVF regaux,W
01A7   3C04           00463                         SUBLW 0x04              ;0x04-W  1 niveles (0.06)
01A8   1C03           00464                         BTFSS STATUS,C  ;¿STATUS.C==1?  -> 0x04<W
01A9   29AD           00465                         GOTO CASO4AC    ;NO, ES MAYOR EL NUMERO
01AA   29AB           00466                         GOTO CASO3BC    ;SI, ES MENOR EL NUMERO
01AB   21C8           00467 CASO3BC:        CALL V6                 ;3.00-3.99V: 1  la condicion de pertenencia (al haberse evaluado
                             la clase 0) es ser menor de 2
01AC   29AF           00468                         GOTO RETOMACV
01AD   21D0           00469 CASO4AC:        CALL V8
01AE   29AF           00470                         GOTO RETOMACV
01AF   0008           00471 RETOMACV:       RETURN
                      00472 
                      00473 
01B0   3030           00474 V0:                     MOVLW a'0'              ;Imprime el valor 0 en el LCD
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01B1   2270           00475                         CALL DATOS
01B2   00B0           00476                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01B3   0008           00477                         RETURN
01B4   3031           00478 V1:                     MOVLW a'1'              ;Imprime el valor 1 en el LCD
01B5   2270           00479                         CALL DATOS
01B6   00B0           00480                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01B7   0008           00481                         RETURN
01B8   3032           00482 V2:                     MOVLW a'2'              ;Imprime el valor 2 en el LCD
01B9   2270           00483                         CALL DATOS
01BA   00B0           00484                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01BB   0008           00485                         RETURN
01BC   3033           00486 V3:                     MOVLW a'3'              ;Imprime el valor 3 en el LCD
01BD   2270           00487                         CALL DATOS
01BE   00B0           00488                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01BF   0008           00489                         RETURN
01C0   3034           00490 V4:                     MOVLW a'4'              ;Imprime el valor 4 en el LCD
01C1   2270           00491                         CALL DATOS
01C2   00B0           00492                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01C3   0008           00493                         RETURN
01C4   3035           00494 V5:                     MOVLW a'5'              ;Imprime el valor 5 en el LCD
01C5   2270           00495                         CALL DATOS
01C6   00B0           00496                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01C7   0008           00497                         RETURN
01C8   3036           00498 V6:                     MOVLW a'6'              ;Imprime el valor 6 en el LCD
01C9   2270           00499                         CALL DATOS
01CA   00B0           00500                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01CB   0008           00501                         RETURN
01CC   3037           00502 V7:                     MOVLW a'7'              ;Imprime el valor 7 en el LCD
01CD   2270           00503                         CALL DATOS
01CE   00B0           00504                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01CF   0008           00505                         RETURN
01D0   3038           00506 V8:                     MOVLW a'8'              ;Imprime el valor 8 en el LCD
01D1   2270           00507                         CALL DATOS
01D2   00B0           00508                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01D3   0008           00509                         RETURN
01D4   3039           00510 V9:                     MOVLW a'9'              ;Imprime el valor 9 en el LCD
01D5   2270           00511                         CALL DATOS
01D6   00B0           00512                         MOVWF resNivel  ;Almacenamos el nivel entero para evaluar en carga de pila o vol
                            taje
01D7   0008           00513                         RETURN
01D8   3040           00514 CARGA:  MOVLW 0X40 ;ALMACENAR CARACTERES EN CGRAM
01D9   2269           00515                 CALL COMANDO
01DA   2282           00516                 CALL RET100MS
                      00517                 
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00518                 ;IF resNivel  = 0
                      00519                 ;CUADRO 0 - ALMACENANDO - Vacio
01DB   300E           00520                 MOVLW b'01110'
01DC   2270           00521                 CALL DATOS
01DD   300A           00522                 MOVLW b'01010'
01DE   2270           00523                 CALL DATOS
01DF   300A           00524                 MOVLW b'01010'
01E0   2270           00525                 CALL DATOS
01E1   300A           00526                 MOVLW b'01010'
01E2   2270           00527                 CALL DATOS
01E3   3011           00528                 MOVLW b'10001'
01E4   2270           00529                 CALL DATOS
01E5   3011           00530                 MOVLW b'10001'
01E6   2270           00531                 CALL DATOS
01E7   301F           00532                 MOVLW b'11111'
01E8   2270           00533                 CALL DATOS
                      00534 
                      00535                 ;IF resNivel  = 1
                      00536                 ;CUADRO 1 - ALMACENANDO - Nivel 1
01E9   300E           00537                 MOVLW b'01110'
01EA   2270           00538                 CALL DATOS
01EB   300A           00539                 MOVLW b'01010'
01EC   2270           00540                 CALL DATOS
01ED   300A           00541                 MOVLW b'01010'
01EE   2270           00542                 CALL DATOS
01EF   300A           00543                 MOVLW b'01010'
01F0   2270           00544                 CALL DATOS
01F1   3011           00545                 MOVLW b'10001'
01F2   2270           00546                 CALL DATOS
01F3   301F           00547                 MOVLW b'11111'
01F4   2270           00548                 CALL DATOS
01F5   301F           00549                 MOVLW b'11111'
01F6   2270           00550                 CALL DATOS              
                      00551 
                      00552                 ;IF resNivel  = 2
                      00553                 ;CUADRO 2 - ALMACENANDO - Nivel 2
01F7   300E           00554                 MOVLW b'01110'
01F8   2270           00555                 CALL DATOS
01F9   300A           00556                 MOVLW b'01010'
01FA   2270           00557                 CALL DATOS
01FB   300A           00558                 MOVLW b'01010'
01FC   2270           00559                 CALL DATOS
01FD   300A           00560                 MOVLW b'01010'
01FE   2270           00561                 CALL DATOS
01FF   301F           00562                 MOVLW b'11111'
0200   2270           00563                 CALL DATOS
0201   301F           00564                 MOVLW b'11111'
0202   2270           00565                 CALL DATOS
0203   301F           00566                 MOVLW b'11111'
0204   2270           00567                 CALL DATOS      
                      00568 
                      00569                 ;IF resNivel  = 3
                      00570                 ;CUADRO 3 - ALMACENANDO - Nivel 3
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0205   300E           00571                 MOVLW b'01110'
0206   2270           00572                 CALL DATOS
0207   300A           00573                 MOVLW b'01010'
0208   2270           00574                 CALL DATOS
0209   300A           00575                 MOVLW b'01010'
020A   2270           00576                 CALL DATOS
020B   300E           00577                 MOVLW b'01110'
020C   2270           00578                 CALL DATOS
020D   301F           00579                 MOVLW b'11111'
020E   2270           00580                 CALL DATOS
020F   301F           00581                 MOVLW b'11111'
0210   2270           00582                 CALL DATOS
0211   301F           00583                 MOVLW b'11111'
0212   2270           00584                 CALL DATOS      
                      00585 
                      00586                 ;IF resNivel  = 4
                      00587                 ;CUADRO 4 - ALMACENANDO - Nivel 4
0213   300E           00588                 MOVLW b'01110'
0214   2270           00589                 CALL DATOS
0215   300A           00590                 MOVLW b'01010'
0216   2270           00591                 CALL DATOS
0217   300E           00592                 MOVLW b'01110'
0218   2270           00593                 CALL DATOS
0219   300E           00594                 MOVLW b'01110'
021A   2270           00595                 CALL DATOS
021B   301F           00596                 MOVLW b'11111'
021C   2270           00597                 CALL DATOS
021D   301F           00598                 MOVLW b'11111'
021E   2270           00599                 CALL DATOS
021F   301F           00600                 MOVLW b'11111'
0220   2270           00601                 CALL DATOS      
                      00602 
                      00603                 ;IF resNivel  = 5
                      00604                 ;CUADRO 5 - ALMACENANDO - Nivel 5
0221   300E           00605                 MOVLW b'01110'
0222   2270           00606                 CALL DATOS
0223   300E           00607                 MOVLW b'01110'
0224   2270           00608                 CALL DATOS
0225   300E           00609                 MOVLW b'01110'
0226   2270           00610                 CALL DATOS
0227   300E           00611                 MOVLW b'01110'
0228   2270           00612                 CALL DATOS
0229   301F           00613                 MOVLW b'11111'
022A   2270           00614                 CALL DATOS
022B   301F           00615                 MOVLW b'11111'
022C   2270           00616                 CALL DATOS
022D   301F           00617                 MOVLW b'11111'
022E   2270           00618                 CALL DATOS              
                      00619                 
                      00620                 ;COLOCA EN PRIMERA LINEA DEL DISPLAY
022F   3080           00621                 MOVLW 0X80
0230   2269           00622                 CALL COMANDO
0231   2282           00623                 CALL RET100MS
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00624 
0232   2105           00625                 CALL UNIVOLT            ;Caso para ver la "carga de pila"
0233   0830           00626                 MOVF resNivel,w
0234   0782           00627                 ADDWF PCL,F             ;(PCL)<-- (PCL)+W
0235   2A3B           00628                 GOTO BATERIA0           ;PC+0   Caso 000: Numero 0
0236   2A3E           00629                 GOTO BATERIA1           ;PC+1   Caso 001: Numero 1
0237   2A41           00630                 GOTO BATERIA2           ;PC+2   Caso 010: Numero 2
0238   2A44           00631                 GOTO BATERIA3           ;PC+3   Caso 011: Numero 3
0239   2A47           00632                 GOTO BATERIA4           ;PC+4   Caso 100: Numero 4
023A   2A4A           00633                 GOTO BATERIA5           ;PC+5   Caso 101: Numero 5
                      00634 
023B   3000           00635 BATERIA0: MOVLW 0X00 ;Cuadro 0 - Vacio
023C   2270           00636                   CALL DATOS
023D   2A4D           00637                   GOTO HOLD_CAR
                      00638 
023E   3001           00639 BATERIA1: MOVLW 0X01 ;Cuadro 1 - Nivel 1
023F   2270           00640                   CALL DATOS
0240   2A4D           00641                   GOTO HOLD_CAR
                      00642 
0241   3002           00643 BATERIA2: MOVLW 0X02 ;Cuadro 2 - Nivel 2
0242   2270           00644                   CALL DATOS
0243   2A4D           00645                   GOTO HOLD_CAR
                      00646 
0244   3003           00647 BATERIA3: MOVLW 0X03 ;Cuadro 3 - Nivel 3
0245   2270           00648                   CALL DATOS
0246   2A4D           00649                   GOTO HOLD_CAR
                      00650 
0247   3004           00651 BATERIA4: MOVLW 0X04 ;Cuadro 4 - Nivel 4
0248   2270           00652                   CALL DATOS
0249   2A4D           00653                   GOTO HOLD_CAR
                      00654 
024A   3005           00655 BATERIA5: MOVLW 0X05 ;Cuadro 5 - Nivel 5
024B   2270           00656                   CALL DATOS
024C   2A4D           00657                   GOTO HOLD_CAR
                      00658 
024D   0809           00659 HOLD_CAR:       MOVF PORTE,W
024E   3C04           00660                         SUBLW 0x04 ;  W<--W-0x40
024F   1903           00661                         BTFSC STATUS,Z  ;¿(CONTA)=0X40?
0250   2A4D           00662                         GOTO HOLD_CAR ;SI                       
0251   3001           00663                         MOVLW 0x01              ;Limpia Display
0252   2269           00664                         CALL COMANDO
0253   3080           00665                         MOVLW 0x80              ;regresa a inicio linea 1
0254   2269           00666                         CALL COMANDO
0255   0180           00667                         CLRF W
0256   281F           00668                         GOTO LOOP_P     
                      00669 
                      00670                         
0257   281F           00671 DEFAULT:        GOTO LOOP_P             ;Caso por defecto, no hace nada, retorna al loop para evaluar lo
                            s bits de control
                      00672 
0258   3030           00673 INICIA_LCD:     MOVLW 0x30
0259   2269           00674                         CALL COMANDO
025A   2282           00675                         CALL RET100MS
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

025B   3030           00676                         MOVLW 0x30
025C   2269           00677                         CALL COMANDO
025D   2282           00678                         CALL RET100MS
025E   3038           00679                         MOVLW 0x38
025F   2269           00680                         CALL COMANDO
0260   300C           00681                         MOVLW 0x0C
0261   2269           00682                         CALL COMANDO
0262   3001           00683                         MOVLW 0x01
0263   2269           00684                         CALL COMANDO
0264   3006           00685                         MOVLW 0x06
0265   2269           00686                         CALL COMANDO
0266   3002           00687                         MOVLW 0x02
0267   2269           00688                         CALL COMANDO
0268   0008           00689                         RETURN
0269   0086           00690 COMANDO:        MOVWF PORTB
026A   2279           00691                         CALL RET200
026B   1085           00692                         BCF PORTA,1
026C   1505           00693                         BSF     PORTA,2
026D   2279           00694                         CALL RET200
026E   1105           00695                         BCF PORTA,2
026F   0008           00696                         RETURN
0270   0086           00697 DATOS:          MOVWF PORTB
0271   2279           00698                         CALL RET200
0272   1485           00699                         BSF PORTA,1
0273   1505           00700                         BSF     PORTA,2
0274   2279           00701                         CALL RET200
0275   1105           00702                         BCF PORTA,2
0276   2279           00703                         CALL RET200
0277   2279           00704                         CALL RET200
0278   0008           00705                         RETURN
0279   30AA           00706 RET200:         MOVLW 0xAA
027A   00A1           00707                         MOVWF valor1
027B   30A4           00708 LOOP:           MOVLW d'164'
027C   00A0           00709                         MOVWF valor
027D   0BA0           00710 LOOP1:          DECFSZ valor,1
027E   2A7D           00711                         GOTO LOOP1
027F   0BA1           00712                         DECFSZ valor1,1
0280   2A7B           00713                         GOTO LOOP
0281   0008           00714                         RETURN
0282   3003           00715 RET100MS:       MOVLW 0x03
0283   00A0           00716                         MOVWF valor
0284   30FF           00717 TRES:           MOVLW 0xFF
0285   00A1           00718                         MOVWF valor1
0286   30FF           00719 DOS:            MOVLW 0xFF
0287   00A2           00720                         MOVWF valor2
Message[305]: Using default destination of 1 (file).
0288   0BA2           00721 UNO:            DECFSZ valor2
0289   2A88           00722                         GOTO UNO
Message[305]: Using default destination of 1 (file).
028A   0BA1           00723                         DECFSZ valor1
028B   2A86           00724                         GOTO DOS
Message[305]: Using default destination of 1 (file).
028C   0BA0           00725                         DECFSZ valor
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

028D   2A84           00726                         GOTO TRES
028E   0008           00727                         RETURN
                      00728 
028F   3053           00729 RETARDO:        MOVLW cte1              ;SUBRUTINA DE RETARDO DE 50us   --valido
0290   00A1           00730                         MOVWF valor1
Message[305]: Using default destination of 1 (file).
0291   0BA1           00731 LOOPR:          DECFSZ valor1
0292   2A91           00732                         GOTO LOOPR
0293   0008           00733                         RETURN
                      00734                 END
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BATERIA0                          0000023B
BATERIA1                          0000023E
BATERIA2                          00000241
BATERIA3                          00000244
BATERIA4                          00000247
BATERIA5                          0000024A
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BINARIO                           000000B7
BRGH                              00000002
C                                 00000000
CARGA                             000001D8
CASO0                             00000094
CASO0B                            0000010A
CASO0BC                           00000196
CASO0BD                           0000013E
CASO1                             00000096
CASO1A                            0000010E
CASO1AC                           00000198
CASO1AD                           00000142
CASO1B                            00000113
CASO1BC                           0000019D
CASO1BD                           00000147
CASO2                             00000098
CASO2A                            00000117
CASO2AC                           0000019F
CASO2AD                           0000014B
CASO2B                            0000011C
CASO2BC                           000001A4
CASO2BD                           00000150
CASO3                             0000009A
CASO3A                            00000120
CASO3AC                           000001A6
CASO3AD                           00000154
CASO3B                            00000125
CASO3BC                           000001AB
CASO3BD                           00000159
CASO4                             0000009C
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

CASO4A                            00000129
CASO4AC                           000001AD
CASO4AD                           0000015D
CASO4B                            0000012E
CASO4BD                           00000162
CASO5                             0000009E
CASO5A                            00000132
CASO5AD                           00000166
CASO5BD                           0000016B
CASO6                             000000A0
CASO6AD                           0000016F
CASO6BD                           00000174
CASO7                             000000A2
CASO7AD                           00000178
CASO7BD                           0000017D
CASO8                             000000A4
CASO8AD                           00000181
CASO8BD                           00000186
CASO9                             000000A6
CASO9AD                           0000018A
CASOA                             000000A8
CASOB                             000000AA
CASOC                             000000AC
CASOD                             000000AE
CASOE                             000000B0
CASOF                             000000B2
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CENVOLT                           0000018F
CHS0                              00000003
CHS1                              00000004
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

CHS2                              00000005
CKE                               00000006
CKP                               00000004
COMANDO                           00000269
CONTINUA                          00000023
CONVEND                           000000B4
CONVERHEXA                        00000082
CREN                              00000004
CSRC                              00000007
CentesimaEncontrada               00000061
D                                 00000005
DATA_ADDRESS                      00000005
DATOS                             00000270
DC                                00000001
DECIMAL                           00000037
DECVOLT                           00000137
DEFAULT                           00000257
DOS                               00000286
D_A                               00000005
D_NOT_A                           00000005
DecimaEncontrada                  00000063
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ESPERA                            00000021
ES_CERO                           000000E9
ES_UNO                            000000E6
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HEXADECIMAL                       00000065
HOLD_BIN                          000000DC
HOLD_CAR                          0000024D
HOLD_DECIMAL                      00000057
HOLD_HEX                          00000078
HOLD_VOL                          000000FB
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

INDF                              00000000
INICIA_LCD                        00000258
INICIO                            00000005
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LOOP                              0000027B
LOOP1                             0000027D
LOOPR                             00000291
LOOP_Centesimas                   00000040
LOOP_Decimas                      00000046
LOOP_P                            0000001F
MostrarDigitos                    0000004E
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRUEBA                            00000030
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

RET100MS                          00000282
RET200                            00000279
RETARDO                           0000028F
RETOMACV                          000001AF
RETOMADV                          0000018E
RETOMAV                           00000136
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRES                              00000284
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
UNIVOLT                           00000105
UNO                               00000288
V0                                000001B0
V1                                000001B4
V2                                000001B8
V3                                000001BC
V4                                000001C0
V5                                000001C4
V6                                000001C8
V7                                000001CC
V8                                000001D0
V9                                000001D4
VOLTAJE                           000000EC
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877A                         00000001
aux                               00000027
contadorCentesima                 00000023
contadorDecima                    00000024
contadorUnidad                    00000025
conver                            00000029
cte1                              00000053
regaux                            00000027
regaux2                           00000028
resNivel                          00000030
valor                             00000020
valor1                            00000021
valor2                            00000022


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X----XXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXX------------ ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   656
Program Memory Words Free:  7536


MPASM  5.51                     PROYECTO3.ASM   5-7-2023  21:03:51         PAGE 26





Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    18 reported,     0 suppressed

